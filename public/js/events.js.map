{"version":3,"sources":["../../src/js/events.js"],"names":["EventManager","events","oldEvents","eventDB","eventNum","seeOld","createSave","save","forEach","e","push","loadSave","eventTemplate","idToEventDB","id","event","Event","undefined","loadEvent","props","EventTemplate","eventID","find","eventNumToEvent","concat","addEvent","reward","idAmt","miscLoadedValues","startingGold","refreshEvents","hasEvents","length","hasSeen","map","includes","readEvent","ResourceManager","addMaterial","amt","type","filter","$eventContent","empty","badCraft","allDungeonEventIDs","Object","assign","image","event2icons","itemReward","time","floor","recipeRewards","bossKill","beats","date","currentDate","$eventList","$","$eventTab","addClass","removeClass","d1","attr","html","title","append","dungeonDrops","d","d2","d3","idToMaterial","img","d4","bossRecipeUnlocks","recipes","recipe","name","itemPic","document","on","preventDefault","currentTarget","parseInt","author","d1a","message","item","recipeList","idToItem","d5","rarity","itemPicName","d7","appendTo","hide","eventIDs","eventChecker","WorkerManager","workers","some","w","owned","achievementStats","totalItemsCrafted","masteredItem","Inventory","full","Shop","purchased","highestFloor"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nconst EventManager = {\r\n    events : [],\r\n    oldEvents : [],\r\n    eventDB : [],\r\n    eventNum : 0,\r\n    seeOld : false,\r\n    createSave() {\r\n        const save = {};\r\n        save.events = [];\r\n        this.events.forEach(e => {\r\n            save.events.push(e.createSave());\r\n        })\r\n        save.oldEvents = [];\r\n        this.oldEvents.forEach(e => {\r\n            save.oldEvents.push(e.createSave());\r\n        })\r\n        return save;\r\n    },\r\n    loadSave(save) {\r\n        save.events.forEach(e => {\r\n            const eventTemplate = this.idToEventDB(e.id);\r\n            const event = new Event(eventTemplate);\r\n            event.loadSave(e);\r\n            event.eventNum = this.eventNum;\r\n            this.eventNum += 1;\r\n            this.events.push(event);\r\n        });\r\n        if (save.oldEvents === undefined) return;\r\n        save.oldEvents.forEach(e => {\r\n            const eventTemplate = this.idToEventDB(e.id);\r\n            const event = new Event(eventTemplate);\r\n            event.loadSave(e);\r\n            event.eventNum = this.eventNum;\r\n            this.eventNum += 1;\r\n            this.oldEvents.push(event);\r\n        });\r\n    },\r\n    loadEvent(props) {\r\n        this.eventDB.push(new EventTemplate(props));\r\n    },\r\n    idToEventDB(eventID) {\r\n        return this.eventDB.find(e => e.id === eventID);\r\n    },\r\n    eventNumToEvent(eventNum) {\r\n        return this.events.concat(this.oldEvents).find(event => event.eventNum === eventNum)\r\n    },\r\n    addEvent(eventID) {\r\n        const eventTemplate = this.idToEventDB(eventID);\r\n        const event = new Event(eventTemplate);\r\n        event.eventNum = this.eventNum;\r\n        this.eventNum += 1;\r\n        if (event.id === \"E001\") event.reward = [new idAmt(\"M001\",miscLoadedValues.startingGold)];\r\n        this.events.push(event);\r\n        refreshEvents();\r\n    },\r\n    hasEvents() {\r\n        return this.events.length > 0;\r\n    },\r\n    hasSeen(eventID) {\r\n        return this.events.concat(this.oldEvents).map(e=>e.id).includes(eventID);\r\n    },\r\n    readEvent(eventNum) {\r\n        const event = this.eventNumToEvent(eventNum);\r\n        if (event.reward !== null) {\r\n            event.reward.forEach(reward => {\r\n                ResourceManager.addMaterial(reward.id, reward.amt);\r\n            })\r\n        }\r\n        event.reward = null;\r\n        if (event.type === \"letter\" && !this.oldEvents.map(e=>e.id).includes(event.id)) this.oldEvents.push(event);\r\n        this.events = this.events.filter(e=>e.eventNum !== eventNum);\r\n        $eventContent.empty();\r\n        refreshEvents();\r\n    },\r\n    badCraft() {\r\n        if (!EventManager.hasSeen(\"E018\")) EventManager.addEvent(\"E018\");\r\n    },\r\n    allDungeonEventIDs() {\r\n        return this.events.filter(e => e.type === \"dungeon\").map(e => e.eventNum);\r\n    },\r\n};\r\n\r\nclass EventTemplate {\r\n    constructor (props) {\r\n        Object.assign(this, props);\r\n        this.image = '<img src=\"/assets/images/DungeonIcons/event.png\" alt=\"Event\">';\r\n        const event2icons = [\"E014\", \"E015\", \"E016\"];\r\n        if (event2icons.includes(this.id)) this.image = '<img src=\"/assets/images/DungeonIcons/event2.png\" alt=\"Event\">';\r\n        else this.image = '<img src=\"/assets/images/DungeonIcons/event.png\" alt=\"Event\">';\r\n    }\r\n}\r\n\r\nclass Event {\r\n    constructor(props) {\r\n        this.reward = null;\r\n        this.itemReward = null;\r\n        this.time = null;\r\n        this.floor = null;\r\n        this.recipeRewards = null;\r\n        this.bossKill = null;\r\n        this.beats = null;\r\n        Object.assign(this, props);\r\n        this.date = currentDate();\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.id = this.id;\r\n        save.reward = this.reward;\r\n        save.time = this.time;\r\n        save.floor = this.floor;\r\n        save.date = this.date;\r\n        save.itemReward = this.itemReward;\r\n        save.bossKill = this.bossKill;\r\n        save.beats = this.beats;\r\n        return save;\r\n    }\r\n    loadSave(save) {\r\n        this.reward = save.reward;\r\n        this.time = save.time;\r\n        this.floor = save.floor;\r\n        this.date = save.date;\r\n        if (save.bossKill !== undefined) this.bossKill = save.bossKill;\r\n        if (save.itemReward !== undefined) this.itemReward = save.itemReward;\r\n        if (save.beats !== undefined) this.beats = save.beats;\r\n    }\r\n};\r\n\r\nconst $eventList = $(\"#eventList\");\r\nconst $eventContent = $(\"#eventContent\");\r\nconst $eventTab = $(\"#eventTab\");\r\n\r\nfunction refreshEvents() {\r\n    //$eventContent.empty();\r\n    if (EventManager.hasEvents()) $eventTab.addClass(\"hasEvent\");\r\n    else $eventTab.removeClass(\"hasEvent\");\r\n    $eventList.empty();\r\n    let events = EventManager.events;\r\n    if (EventManager.seeOld) events = EventManager.oldEvents;\r\n    events.forEach(event => {\r\n        const d1 = $(\"<div/>\").addClass(\"eventList\").attr(\"eventNum\",event.eventNum).html(`${event.image} ${event.title}`);\r\n        $eventList.append(d1);\r\n    });\r\n    if (events.length == 0) {\r\n        const d1 = $(\"<div/>\").addClass(\"events-placeholder-details\").html(\"You have no mail to read at the moment.\"); \r\n        $eventList.append(d1);\r\n    }\r\n}\r\n\r\nfunction dungeonDrops(event) {\r\n    //returns a bunch of divs for the rewards\r\n    const d = $(\"<div/>\").addClass(\"rewardDiv\");\r\n    const d1 = $(\"<div/>\").addClass(\"rewardDivTitle\").html(\"Rewards\");\r\n    d.append(d1);\r\n    if (event.reward === undefined) return d;\r\n    event.reward.forEach(reward => {\r\n        const d2 = $(\"<div/>\").addClass(\"rewardCard tooltip\").attr({\"data-tooltip\":\"material_desc\",\"data-tooltip-value\":reward.id});\r\n        const d3 = $(\"<div/>\").addClass(\"rewardImage\").html(ResourceManager.idToMaterial(reward.id).img);\r\n        const d4 = $(\"<div/>\").addClass(\"rewardAmt\").html(reward.amt);\r\n        d.append(d2.append(d3,d4));\r\n    });\r\n    return d;\r\n}\r\n\r\nfunction bossRecipeUnlocks(recipes) {\r\n    const d = $(\"<div/>\").addClass(\"rewardDiv\");\r\n    const d1 = $(\"<div/>\").addClass(\"rewardDivTitle\").html(\"Rewards\");\r\n    d.append(d1);\r\n    recipes.forEach(recipe => {\r\n        const d2 = $(\"<div/>\").addClass(\"rewardCard tooltip\").attr({\"data-tooltip\":\"recipe_desc\",\"data-tooltip-value\":recipe.name});\r\n        const d3 = $(\"<div/>\").addClass(\"rewardImage\").html(recipe.itemPic());\r\n        d.append(d2.append(d3));\r\n    });\r\n    return d;\r\n}\r\n\r\n$(document).on('click', \"div.eventList\", (e) => {\r\n    //display the text for a clicked event\r\n    e.preventDefault();\r\n    $(\"div.eventList\").removeClass(\"highlight\");\r\n    $(e.currentTarget).addClass(\"highlight\");\r\n    const eventNum = parseInt($(e.currentTarget).attr(\"eventNum\"));\r\n    const event = EventManager.eventNumToEvent(eventNum);\r\n    $eventContent.empty();\r\n    const d = $(\"<div/>\").addClass(\"eventBody\");\r\n    const d1 = $(\"<div/>\").addClass(\"eventAuthor\").html(`<span>Received from:</span> ${event.author}`);\r\n    const d1a = $(\"<div/>\").addClass(\"eventAuthor\").html(`<span>Date:</span> ${event.date}`);\r\n    const d2 = $(\"<div/>\").addClass(\"eventMessage\").html(event.message);\r\n    d.append(d1,d1a,d2);\r\n    if (event.reward !== null ) {\r\n        const d4 = $(\"<div/>\").addClass(\"eventReward\").html(dungeonDrops(event));\r\n        d.append(d4);\r\n    }\r\n    if (event.itemReward !== null) {\r\n        const item = recipeList.idToItem(event.itemReward.id);\r\n        const d5 = $(\"<div/>\").addClass(\"iR\"+event.itemReward.rarity).html(item.itemPicName());\r\n        d.append(d5);\r\n    }\r\n    const d7 = $(\"<div/>\").addClass(\"eventActionsContainer\").appendTo(d);\r\n        $(\"<div/>\").addClass(\"eventConfirm eventActionButton\").attr(\"eventID\",eventNum).html(\"Accept\").appendTo(d7);\r\n    if (EventManager.seeOld) d7.hide();\r\n    if (event.type === \"dungeon\") $(\"<div/>\").attr(\"id\",\"eventCollectAll\").addClass(\"eventActionButton\").html(\"Collect All Dungeon Rewards\").appendTo(d7);\r\n    $eventContent.append(d);\r\n});\r\n\r\n$(document).on('click', \"div.eventConfirm\", (e) => {\r\n    //gets rid of event, and adds to inventory if you need to\r\n    e.preventDefault();\r\n    const eventID = parseInt($(e.currentTarget).attr(\"eventID\"));\r\n    EventManager.readEvent(eventID);\r\n})\r\n\r\n$(document).on('click', \"#eventCollectAll\", (e) => {\r\n    e.preventDefault();\r\n    const eventIDs = EventManager.allDungeonEventIDs();\r\n    eventIDs.forEach(eventID => EventManager.readEvent(eventID));\r\n})\r\n\r\n$(document).on('click', \"#readNew\", (e) => {\r\n    $(e.currentTarget).addClass(\"readActive\");\r\n    $(\"#readOld\").removeClass(\"readActive\");\r\n    EventManager.seeOld = false;\r\n    refreshEvents();\r\n})\r\n\r\n$(document).on('click', \"#readOld\", (e) => {\r\n    $(e.currentTarget).addClass(\"readActive\");\r\n    $(\"#readNew\").removeClass(\"readActive\");\r\n    EventManager.seeOld = true;\r\n    refreshEvents();\r\n})\r\n\r\nfunction eventChecker() {\r\n    if (!EventManager.hasSeen(\"E002\") && !WorkerManager.workers.some(w => w.type === \"standard\" && !w.owned)) EventManager.addEvent(\"E002\");\r\n    if (!EventManager.hasSeen(\"E003\") && WorkerManager.workers.some(w => w.type === \"advanced\" && w.owned)) EventManager.addEvent(\"E003\");\r\n    if (!EventManager.hasSeen(\"E005\") && achievementStats.totalItemsCrafted >= 10000) EventManager.addEvent(\"E005\");\r\n    if (!EventManager.hasSeen(\"E006\") && masteredItem) EventManager.addEvent(\"E006\");\r\n    if (!EventManager.hasSeen(\"E007\") && Inventory.full()) EventManager.addEvent(\"E007\");\r\n    if (!EventManager.hasSeen(\"E009\") && Shop.purchased.includes(\"AL4101\")) EventManager.addEvent(\"E009\");\r\n    if (!EventManager.hasSeen(\"E010\") && Shop.purchased.includes(\"AL4102\")) EventManager.addEvent(\"E010\");\r\n    if (!EventManager.hasSeen(\"E011\") && Shop.purchased.includes(\"AL4103\")) EventManager.addEvent(\"E011\");\r\n    if (!EventManager.hasSeen(\"E012\") && Shop.purchased.includes(\"AL4104\")) EventManager.addEvent(\"E012\");\r\n    if (!EventManager.hasSeen(\"E017\") && achievementStats.highestFloor() >= 50) EventManager.addEvent(\"E017\");\r\n    if (!EventManager.hasSeen(\"E019\") && Shop.purchased.includes(\"AL4106\")) EventManager.addEvent(\"E019\");\r\n    if (!EventManager.hasSeen(\"E020\") && Shop.purchased.includes(\"AL4107\")) EventManager.addEvent(\"E020\");\r\n    if (!EventManager.hasSeen(\"E021\") && Shop.purchased.includes(\"AL41071\")) EventManager.addEvent(\"E021\");\r\n    if (!EventManager.hasSeen(\"E022\") && Shop.purchased.includes(\"AL41072\")) EventManager.addEvent(\"E022\");\r\n}\r\n\r\nlet masteredItem = false;"],"file":"events.js"}