{"version":3,"sources":["../../src/js/guilds.js"],"names":["GuildManager","guilds","lastClicked","addGuild","guild","push","createSave","save","forEach","loadSave","guildSave","idToGuild","id","find","g","submitOrder","gid","maxGuildLevel","DungeonManager","bossCount","maxLvl","Math","max","map","lvl","repopulateUnmastered","Guild","props","Object","assign","rep","order1","order2","order3","unmastered","guildOrderItem","undefined","maxLvlReached","repLvl","refreshAllSales","refreshguildprogress","givenlvl","miscLoadedValues","recipeList","filterByGuild","filter","r","owned","repReq","sort","a","b","WorkerManager","w","devtools","orderBypass","order","every","o","complete","orderNum","previous","possibleItems","guildOrderItems","possibleGuildItems","guildUnlock","length","chosenGuildItem","floor","GuildSeedManager","fauxRand","chosenItem","slot","submitContainer","itemString","uniqueID","itemMatch","Inventory","findCraftMatch","Notifications","cantFindMatch","removeContainerFromInventory","containerID","fufilled","addRep","achievementStats","gold","goldValue","ResourceManager","addMaterial","generateNewOrder","refreshAllOrders","reduce","unmasteredByGuild","workers","item","idToItem","rarity","generateRarity","sharp","generateSharp","amt","generateAmt","generateRep","displayName","generateName","smithBonus","splice","sharpAdd","round","value","min","startAmt","random","epicChance","greatChance","goodChance","rarityRoll","sharpChance","sharpMin","sharpMax","bellCurveSeed","name","$guildList","$","initializeGuilds","empty","d1","addClass","data","html","icon","appendTo","description","unlocked","hide","show","refreshguildOrder","refreshSales","refreshRecipeMastery","refreshGuildWorkers","checkCraftableStatus","$orderCraft","removeClass","recipes","recipe","canProduce","$gp","inWords","append","createGuildBar","generateProgressBar","options","prefix","tooltip","text","textID","width","fill","progressBarContainer","attr","progressBarText","progressBarContent","progressBar","progressBarFill","css","repBarText","repPercent","repWidth","toFixed","miscIcons","guildRep","$go","createOrderCard","index","materialIcon","d2","gcost","formatToUnits","left","itemCountSpecific","d3","d3a","refreshOrderInvCount","each","invCount","$gs","recipeToBuy","createRecipeBuyCard","guildLvl","type","itemPicName","itemLevel","d4","d5","formatWithCommas","goldCost","refreshAllGuildWorkers","$gw","worker","createWorkerBuyCard","pic","production","productionText","workerID","refreshAllRecipeMastery","$guildNotice","$guildMasteryContainer","rid","createRecipeMasteryCard","masteryCost","refreshRecipeMasteryAmt","document","on","e","preventDefault","currentTarget","attemptMastery","refreshInventoryPlaces","destroyTooltip","itemData","submitItem","recipeId","buyRecipe","stopPropagation","itemID","actionSlotManager","addSlot"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nconst GuildManager = {\r\n    guilds : [],\r\n    lastClicked : \"G003\",\r\n    addGuild(guild) {\r\n        this.guilds.push(guild);\r\n    },\r\n    createSave() {\r\n        const save = {};\r\n        save.guilds = [];\r\n        this.guilds.forEach(guild => {\r\n            save.guilds.push(guild.createSave());\r\n        });\r\n        return save;\r\n    },\r\n    loadSave(save) {\r\n        save.guilds.forEach(guildSave => {\r\n            const guild = this.idToGuild(guildSave.id);\r\n            guild.loadSave(guildSave);\r\n        });\r\n    },\r\n    idToGuild(id) {\r\n        return this.guilds.find(g=>g.id === id);\r\n    },\r\n    submitOrder(gid) {\r\n        const guild = this.idToGuild(gid);\r\n        guild.submitOrder();\r\n    },\r\n    maxGuildLevel() {\r\n        return (DungeonManager.bossCount()+1)*4-1;\r\n    },\r\n    maxLvl() {\r\n        return Math.max(...this.guilds.map(g=>g.lvl));\r\n    },\r\n    repopulateUnmastered() {\r\n        this.guilds.forEach(g => g.repopulateUnmastered());\r\n    }\r\n}\r\n\r\nclass Guild {\r\n    constructor (props) {\r\n        Object.assign(this, props);\r\n        this.rep = 0;\r\n        this.lvl = 0;\r\n        this.order1 = null;\r\n        this.order2 = null;\r\n        this.order3 = null;\r\n        this.unmastered = [];\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.id = this.id;\r\n        save.lvl = this.lvl;\r\n        save.rep = this.rep;\r\n        save.order1 = this.order1.createSave();\r\n        save.order2 = this.order2.createSave();\r\n        save.order3 = this.order3.createSave();\r\n        save.unmastered = this.unmastered;\r\n        return save;\r\n    }\r\n    loadSave(save) {\r\n        this.rep = save.rep;\r\n        this.lvl = save.lvl;\r\n        this.order1 = new guildOrderItem(save.order1.gid,save.order1.id,save.order1.lvl);\r\n        this.order1.loadSave(save.order1);\r\n        this.order2 = new guildOrderItem(save.order2.gid,save.order2.id,save.order2.lvl);\r\n        this.order2.loadSave(save.order2);\r\n        this.order3 = new guildOrderItem(save.order3.gid,save.order3.id,save.order3.lvl);\r\n        this.order3.loadSave(save.order3);\r\n        if (save.unmastered !== undefined) this.unmastered = save.unmastered;\r\n    }\r\n    addRep(rep) {\r\n        if (this.maxLvlReached()) return;\r\n        this.rep += rep;\r\n        if (this.rep >= this.repLvl()) {\r\n            this.rep = 0;\r\n            this.lvl += 1;\r\n            refreshAllSales();\r\n        }\r\n        refreshguildprogress(this);\r\n    }\r\n    repLvl(givenlvl) {\r\n        givenlvl = givenlvl || this.lvl;\r\n        return miscLoadedValues[\"guildRepForLvls\"][givenlvl];\r\n    }\r\n    recipeToBuy() {\r\n        return recipeList.filterByGuild(this.id).filter(r =>!r.owned && r.repReq <= GuildManager.maxGuildLevel()).sort((a,b) => a.repReq-b.repReq);\r\n    }\r\n    workers() {\r\n        return WorkerManager.filterByGuild(this.id).filter(w => w.owned);\r\n    }\r\n    orderComplete() {\r\n        if (devtools.orderBypass) return true;\r\n        return this.order.every(o=>o.complete());\r\n    }\r\n    generateNewOrder(orderNum,previous=\"ignore\") {\r\n        let possibleItems = recipeList.guildOrderItems(this.lvl);\r\n        if (orderNum === 1) {\r\n            let possibleGuildItems = possibleItems.filter(r => r.guildUnlock === this.id);\r\n            if (possibleGuildItems.length > 1) possibleGuildItems = possibleGuildItems.filter(r=>r.id !== previous);\r\n            const chosenGuildItem = possibleGuildItems[Math.floor(GuildSeedManager.fauxRand(this.id)*possibleGuildItems.length)];\r\n            this.order1 = new guildOrderItem(this.id,chosenGuildItem.id,this.lvl);\r\n            return;\r\n        }\r\n        if (possibleItems.length > 1) possibleItems = possibleItems.filter(r=>r.id !== previous);\r\n        const chosenItem = possibleItems[Math.floor(GuildSeedManager.fauxRand(this.id)*possibleItems.length)];\r\n        if (orderNum === 2) this.order2 = new guildOrderItem(this.id,chosenItem.id,this.lvl);\r\n        if (orderNum === 3) this.order3 = new guildOrderItem(this.id,chosenItem.id,this.lvl);\r\n    }\r\n    submitItem(slot) {\r\n        let submitContainer = this.order1;\r\n        if (slot === 2) submitContainer = this.order2;\r\n        if (slot === 3) submitContainer = this.order3;\r\n        const itemString = submitContainer.uniqueID();\r\n        const itemMatch = Inventory.findCraftMatch(itemString);\r\n        if (itemMatch === undefined) return Notifications.cantFindMatch();\r\n        Inventory.removeContainerFromInventory(itemMatch.containerID);\r\n        submitContainer.fufilled += 1;\r\n        this.addRep(submitContainer.rep);\r\n        achievementStats.gold(submitContainer.goldValue());\r\n        ResourceManager.addMaterial(\"M001\",submitContainer.goldValue());\r\n        if (submitContainer.complete()) this.generateNewOrder(slot, submitContainer.id);\r\n        refreshAllOrders();\r\n    }\r\n    goldValue() {\r\n        const gold = this.order.map(o => o.goldValue());\r\n        if (gold.length === 0) return 0;\r\n        return gold.reduce((a,b) => a+b);\r\n    }\r\n    maxLvlReached() {\r\n        return this.lvl >= GuildManager.maxGuildLevel();\r\n    }\r\n    repopulateUnmastered() {\r\n        this.unmastered = recipeList.unmasteredByGuild(this.id);\r\n    }\r\n    unlocked() {\r\n        return this.workers().length > 0;\r\n    }\r\n}\r\n\r\nclass guildOrderItem {\r\n    constructor (gid,id,lvl) {\r\n        this.gid = gid;\r\n        this.id = id;\r\n        this.item = recipeList.idToItem(id);\r\n        this.lvl = lvl;\r\n        this.rarity = this.generateRarity(lvl);\r\n        this.sharp = this.generateSharp(lvl);\r\n        this.amt = this.generateAmt(lvl);\r\n        this.rep = this.generateRep(lvl,this.amt);\r\n        this.fufilled = 0;\r\n        this.displayName = this.generateName();\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.gid = this.gid;\r\n        save.id = this.id;\r\n        save.lvl = this.lvl;\r\n        save.amt = this.amt;\r\n        save.rarity = this.rarity;\r\n        save.sharp = this.sharp;\r\n        save.fufilled = this.fufilled;\r\n        save.rep = this.rep;\r\n        return save;\r\n    }\r\n    loadSave(save) {\r\n        this.amt = save.amt;\r\n        this.rarity = save.rarity;\r\n        this.sharp = save.sharp;\r\n        this.fufilled = save.fufilled;\r\n        this.rep = save.rep;\r\n        this.item = recipeList.idToItem(this.id);\r\n        this.displayName = this.generateName();\r\n    }\r\n    goldValue() {\r\n        const smithBonus = [...miscLoadedValues[\"smithChance\"]].splice(0,this.sharp);\r\n        const sharpAdd = smithBonus.length === 0 ? 0 : smithBonus.reduce((a,b)=>a+b);\r\n        return Math.round(this.item.value*(2*(1+this.rarity)+sharpAdd));\r\n    }\r\n    complete() {\r\n        return this.fufilled >= this.amt;\r\n    }\r\n    left() {\r\n        return this.amt - this.fufilled;\r\n    }\r\n    generateAmt(lvl) {\r\n        const max = miscLoadedValues[\"goMax\"][lvl];\r\n        const min = miscLoadedValues[\"goMin\"][lvl];\r\n        let startAmt = Math.floor(Math.random() * (max - min + 1)) + min;\r\n        startAmt -= this.rarity*2;\r\n        startAmt -= Math.floor(this.sharp/1.5);\r\n        return Math.max(1,startAmt);\r\n    }\r\n    generateRep(lvl,amt) {\r\n        return 1 + miscLoadedValues[\"goMax\"][lvl] - amt;\r\n    }\r\n    generateRarity(lvl) {\r\n        const epicChance = miscLoadedValues[\"goEpic\"][lvl];\r\n        const greatChance = miscLoadedValues[\"goGreat\"][lvl]+epicChance;\r\n        const goodChance = miscLoadedValues[\"goGood\"][lvl]+greatChance;     \r\n        const rarityRoll = Math.floor(GuildSeedManager.fauxRand(this.gid) * 100);\r\n        if (epicChance > rarityRoll) return 3;\r\n        if (greatChance > rarityRoll) return 2;\r\n        if (goodChance > rarityRoll) return 1;\r\n        return 0;\r\n    }\r\n    generateSharp(lvl) {\r\n        const sharpChance = miscLoadedValues[\"goSharp\"][lvl];\r\n        const sharpMin = miscLoadedValues[\"goSharpMin\"][lvl];\r\n        const sharpMax = miscLoadedValues[\"goSharpMax\"][lvl];\r\n        if (sharpChance < Math.floor(GuildSeedManager.fauxRand(this.gid) * 100)) return 0;\r\n        return bellCurveSeed(this.gid, sharpMin,sharpMax);\r\n    }\r\n    generateName() {\r\n        if (this.sharp > 0) return `<span>+${this.sharp} ${this.item.name}</span>`\r\n        return `${this.item.name}`\r\n    }\r\n    uniqueID() {\r\n        return this.id+\"_\"+this.rarity+\"_\"+this.sharp;\r\n    }\r\n}\r\n\r\nconst $guildList = $(\"#guildList\");\r\n\r\nfunction initializeGuilds() {\r\n    $guildList.empty();\r\n    GuildManager.guilds.forEach(g => {\r\n        const d1 = $(\"<div/>\").addClass(\"guildListButton\").data(\"gid\",g.id).html(`${g.icon} ${g.name}`);\r\n        if (GuildManager.lastClicked === g.id) d1.addClass(\"selected\");\r\n        d1.appendTo($guildList);\r\n        $(`#${g.id}Name`).html(`<h2>${g.name}</h2>`);\r\n        $(`#${g.id}Desc`).html(g.description);\r\n        if (!g.unlocked()) d1.hide();\r\n    });\r\n    $(\".guildContainer\").hide();\r\n    $(\"#\"+GuildManager.lastClicked).show();\r\n    GuildManager.guilds.forEach(guild => {\r\n        refreshguildprogress(guild);\r\n        refreshguildOrder(guild);\r\n        refreshSales(guild);\r\n        refreshRecipeMastery(guild);\r\n        refreshGuildWorkers(guild);\r\n    });\r\n};\r\n\r\nfunction checkCraftableStatus() {\r\n    // Check if item in guild order can be crafted\r\n    const $orderCraft = $(\".orderCraft\");\r\n    $orderCraft.removeClass(\"recipeCraftDisable\");\r\n    recipeList.recipes.forEach(recipe => {\r\n        if (!recipe.canProduce || !recipe.owned) $(\"#\"+recipe.id+\".orderCraft\").addClass(\"recipeCraftDisable\");\r\n    }) \r\n}\r\n\r\nfunction refreshguildprogress(guild) {\r\n    const id = guild.id;\r\n    const $gp = $(`#${id}Progress`);\r\n    $gp.empty();\r\n    $(\"<div/>\").addClass(\"guildLevel\").html(`Level ${inWords(guild.lvl)}`).appendTo($gp);\r\n    $gp.append(createGuildBar(guild));\r\n}\r\n\r\nfunction generateProgressBar(options) {\r\n    const {prefix, tooltip, text, textID, icon, width, fill} = options;\r\n    const progressBarContainer = $(\"<div/>\").addClass(`progressBarContainer ${prefix}BarContainer`);\r\n    if (tooltip) progressBarContainer.addClass(\"tooltip\").attr({\"data-tooltip\": tooltip});\r\n\r\n    const progressBarText = $(\"<div/>\").addClass(\"progressBarText\");\r\n    if (text) progressBarText.html(text).appendTo(progressBarContainer)\r\n    if (textID) progressBarText.attr({\"id\": textID});\r\n\r\n    const progressBarContent = $(\"<div/>\").addClass(\"progressBarContent\");\r\n    if (icon) $(\"<div/>\").addClass(\"progressBarIcon\").html(icon).appendTo(progressBarContent);\r\n    if (icon && text) progressBarText.addClass(\"containsIcon\");\r\n\r\n    const progressBar = $(\"<div/>\").addClass(\"progressBar\").appendTo(progressBarContent);\r\n    const progressBarFill = $(\"<div/>\").addClass(\"progressBarFill\").css(\"width\", width).appendTo(progressBar);\r\n    if (fill) progressBarFill.attr({\"id\": fill});\r\n\r\n    progressBarContainer.append(progressBarContent)\r\n    return progressBarContainer;\r\n}\r\n\r\nfunction createGuildBar(guild) {\r\n    const repBarText = `Reputation: ${guild.rep}/${guild.repLvl()}`;\r\n    const repPercent = guild.rep/guild.repLvl();\r\n    const repWidth = (repPercent*100).toFixed(1)+\"%\";\r\n    const options = {\r\n        prefix: \"rep\",\r\n        tooltip: \"rep\",\r\n        icon: miscIcons.guildRep,\r\n        text: repBarText,\r\n        width: repWidth\r\n    }\r\n    if (guild.maxLvlReached()) {\r\n        options.prefix = \"repMax\"\r\n        options.text = \"Max Level Reached!\"\r\n        options.width = \"100%\"\r\n    }\r\n    return generateProgressBar(options);\r\n}\r\n\r\nfunction refreshAllOrders() {\r\n    GuildManager.guilds.forEach(g => refreshguildOrder(g));\r\n    checkCraftableStatus();\r\n}\r\n\r\nfunction refreshguildOrder(guild) {\r\n    const id = guild.id;\r\n    const $go = $(`#${id}Order`);\r\n    $go.empty();\r\n    if (guild.maxLvlReached()) {\r\n        $(\"<div/>\").addClass(\"guildMaxLvl\").html(\"Max Guild Level Reached - Defeat a Boss to unlock more levels\").appendTo($go);\r\n        return;\r\n    }\r\n    $go.append(createOrderCard(guild.order1,id,1));\r\n    if (guild.lvl < 4) return;\r\n    $go.append(createOrderCard(guild.order2,id,2));\r\n    if (guild.lvl < 8) return;\r\n    $go.append(createOrderCard(guild.order3,id,3));\r\n};\r\n\r\nfunction createOrderCard(item,id,index) {\r\n    const d1 = $(\"<div/>\").addClass(`orderCard R${item.rarity}`).data({\"slot\":index,\"gid\":id});\r\n    if (item.complete()) d1.addClass('orderComplete');\r\n    $(\"<div/>\").addClass(\"orderIcon\").html(ResourceManager.materialIcon(item.id)).appendTo(d1);\r\n    $(\"<div/>\").addClass(\"orderName itemName\").html(item.displayName).appendTo(d1);\r\n    $(\"<div/>\").addClass(\"itemToSac tooltip\").attr({\"data-tooltip\":\"recipe_desc\",\"data-tooltip-value\":item.id}).appendTo(d1);\r\n    const d2 = $(\"<div/>\").addClass(\"orderMaterials\").appendTo(d1);\r\n    item.item.gcost.forEach(g => {\r\n        $(\"<div/>\").addClass(\"orderGuildWorker\").html(GuildManager.idToGuild(g).icon).appendTo(d2);\r\n    });\r\n    $(\"<div/>\").addClass(\"itemToSacReq\").html(`${formatToUnits(item.left(),2)} Left`).appendTo(d1);\r\n    $(\"<div/>\").addClass(\"orderInv tooltip\").attr(\"data-tooltip\",\"in_inventory\").data(\"uid\",item.uniqueID()).html(`<i class=\"fas fa-cube\"></i> ${Inventory.itemCountSpecific(item.uniqueID())}`).appendTo(d1);\r\n    $(\"<div/>\").attr(\"id\",item.id).addClass(\"orderCraft\").html(`<i class=\"fas fa-hammer\"></i> Craft`).appendTo(d1);\r\n    const d3 = $(\"<div/>\").addClass(\"guildItemSubmit\").appendTo(d1);\r\n    $(\"<div/>\").addClass(\"guildItemSubmitHeading\").html(`Submit one for:`).appendTo(d3);\r\n        const d3a = $(\"<div/>\").addClass(\"guildItemSubmitRewards\").appendTo(d3);\r\n        $(\"<div/>\").addClass(\"guildItemSubmitItem RewardGold tooltip\").attr({\"data-tooltip\": \"gold_value\", \"data-tooltip-value\": item.goldValue()}).html(`${miscIcons.gold} +${item.goldValue()}`).appendTo(d3a);\r\n        $(\"<div/>\").addClass(\"guildItemSubmitItem RewardRep tooltip\").attr(\"data-tooltip\", \"rep\").html(`+${item.rep} Reputation`).appendTo(d3a);\r\n    return d1;\r\n};\r\n\r\nfunction refreshOrderInvCount() {\r\n    $(\".orderInv\").each(function() {\r\n        const uniqueID = $(this).data(\"uid\");\r\n        const invCount = Inventory.itemCountSpecific(uniqueID);\r\n        $(this).removeClass(\"canContribute\").html(`<i class=\"fas fa-cube\"></i> ${invCount}`);\r\n        if (invCount > 0) $(this).addClass(\"canContribute\");\r\n    });\r\n}\r\n\r\nfunction refreshAllSales() {\r\n    GuildManager.guilds.forEach(g => refreshSales(g));\r\n};\r\n\r\nfunction refreshSales(guild) {\r\n    const $gs = $(`#${guild.id}Sales`);\r\n    $gs.empty();\r\n    guild.recipeToBuy().forEach(recipe => {\r\n        $gs.append(createRecipeBuyCard(recipe,guild.lvl));\r\n    });\r\n};\r\n\r\nfunction createRecipeBuyCard(recipe,guildLvl) {\r\n    const d1 = $(\"<div/>\").addClass(\"recipeBuyCard\");\r\n    const d2 = $(\"<div/>\").addClass(\"recipeBuyCardHead\").html(recipe.type);\r\n    const d3 = $(\"<div/>\").addClass(\"recipeBuyCardBody\").html(recipe.itemPicName());\r\n    const d3a = $(\"<div/>\").addClass(\"recipeBuyCardTier recipeItemLevel\").html(recipe.itemLevel());\r\n    if (recipe.repReq > guildLvl) {\r\n        const d4 = $(\"<div/>\").addClass(\"recipeBuyCardBuyLater\").html(`Reach Guild Level ${recipe.repReq} to Unlock`);\r\n        return d1.append(d2,d3,d3a,d4);\r\n    }\r\n    const d5 = $(\"<div/>\").addClass(\"recipeBuyCardBuy\").data(\"rid\",recipe.id);\r\n        $(\"<div/>\").addClass(\"recipeBuyCardBuyText\").html(\"Purchase\").appendTo(d5);\r\n        $(\"<div/>\").addClass(\"recipeBuyCardBuyCost tooltip\").attr({\"data-tooltip\": \"gold_value\", \"data-tooltip-value\": formatWithCommas(recipe.goldCost)}).html(`${miscIcons.gold} ${formatToUnits(recipe.goldCost,2)}`).appendTo(d5);\r\n    return d1.append(d2,d3,d3a,d5);\r\n};\r\n\r\nfunction refreshAllGuildWorkers() {\r\n    GuildManager.guilds.forEach(g=>refreshGuildWorkers(g));\r\n}\r\n\r\nfunction refreshGuildWorkers(guild) {\r\n    const $gw = $(`#${guild.id}Workers`);\r\n    $gw.empty();\r\n    guild.workers().forEach(worker => {\r\n        $gw.append(createWorkerBuyCard(worker));\r\n    })\r\n}\r\n\r\nfunction createWorkerBuyCard(worker) {\r\n    const d1 = $(\"<div/>\").addClass(\"workerBuyCard\");\r\n    const d2 = $(\"<div/>\").addClass(\"workerBuyCardBodyImage\").html(worker.pic);\r\n    const d3 = $(\"<div/>\").addClass(\"workerBuyCardBodyName\").html(worker.name);\r\n    const d4 = $(\"<div/>\").addClass(\"workerBuyCardBodyProduction tooltip\").attr({\"data-tooltip\": \"guild_worker\", \"data-tooltip-value\": worker.production}).html(worker.productionText());\r\n    const d5 = $('<div/>').addClass('workerBuyCardDesc tooltip').attr({\"data-tooltip\":\"worker_desc\",\"data-tooltip-value\":worker.workerID}).html(\"<i class='fas fa-info-circle'></i>\");\r\n    return d1.append(d2,d3,d4,d5);\r\n};\r\n\r\nfunction refreshAllRecipeMastery() {\r\n    GuildManager.guilds.forEach(g=>refreshRecipeMastery(g));\r\n}\r\n\r\nfunction refreshRecipeMastery(guild) {\r\n    guild.repopulateUnmastered();\r\n    const $guildNotice = $(`#${guild.id}Mastery .guildMasteryNotice`);\r\n    const $guildMasteryContainer = $(`#${guild.id}Mastery .guildMasteryCardContainer`)\r\n    $guildNotice.empty();\r\n    $guildMasteryContainer.empty();\r\n    if (guild.unmastered.length === 0) $guildNotice.addClass(\"noMasteryAvailable\").html(\"No recipes to master currently.\");\r\n    else $guildNotice.removeClass(\"noMasteryAvailable\");\r\n    guild.unmastered.forEach(rid => {\r\n        const recipe = recipeList.idToItem(rid);\r\n        $guildMasteryContainer.append(createRecipeMasteryCard(recipe));\r\n    });\r\n    \r\n}\r\n\r\nfunction createRecipeMasteryCard(recipe) {\r\n    const d1 = $(\"<div/>\").addClass(\"recipeMasteryGuildCard\");\r\n    $(\"<div/>\").addClass(\"recipeMasteryGuildPicName\").html(recipe.itemPicName()).appendTo(d1);\r\n    const masteryCost = recipe.masteryCost();\r\n    $(\"<div/>\").addClass(\"recipeMasteryGuildButton tooltip\").attr({\"id\": \"rcm\"+recipe.id, \"data-tooltip\": \"material_desc\", \"data-tooltip-value\": masteryCost.id}).data(\"rid\",recipe.id).html(`Master for ${ResourceManager.materialIcon(masteryCost.id)} ${masteryCost.amt}`).appendTo(d1);\r\n    return d1;\r\n}\r\n\r\nfunction refreshRecipeMasteryAmt(recipe) {\r\n    const masteryCost = recipe.masteryCost();\r\n    $(`#rcm${recipe.id}`).html(`Master for ${ResourceManager.materialIcon(masteryCost.id)} ${masteryCost.amt}`);\r\n}\r\n\r\n//attempt a mastery\r\n$(document).on(\"click\",\".recipeMasteryGuildButton\",(e) => {\r\n    e.preventDefault();\r\n    const rid = $(e.currentTarget).data(\"rid\");\r\n    recipeList.attemptMastery(rid);\r\n});\r\n\r\n//submit a guild order\r\n$(document).on(\"click\",\".guildOrderSubmit\",(e) => {\r\n    e.preventDefault();\r\n    const gid = $(e.currentTarget).data(\"gid\");\r\n    GuildManager.submitOrder(gid);\r\n    refreshInventoryPlaces();\r\n});\r\n\r\n//click guild tab button\r\n$(document).on(\"click\",\".guildListButton\",(e) => {\r\n    e.preventDefault();\r\n    $(\".guildListButton\").removeClass(\"selected\");\r\n    $(e.currentTarget).addClass(\"selected\");\r\n    const gid = $(e.currentTarget).data(\"gid\");\r\n    GuildManager.lastClicked = gid;\r\n    $(\".guildContainer\").hide();\r\n    $(\"#\"+gid).show();\r\n});\r\n\r\n\r\n//submit an item to guild order\r\n$(document).on(\"click\",\".orderCard\",(e) => {\r\n    e.preventDefault();\r\n    destroyTooltip();\r\n    const itemData = $(e.currentTarget).data();\r\n    GuildManager.idToGuild(itemData.gid).submitItem(itemData.slot);\r\n    refreshOrderInvCount();\r\n});\r\n\r\n//buy a recipe from guild\r\n$(document).on(\"click\",\".recipeBuyCardBuy\", (e) => {\r\n    e.preventDefault();\r\n    destroyTooltip();\r\n    const recipeId = $(e.currentTarget).data(\"rid\");\r\n    recipeList.buyRecipe(recipeId);\r\n});\r\n\r\n//Craft from Order Card\r\n$(document).on('click', '.orderCraft', (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const itemID = $(e.currentTarget).attr(\"id\");\r\n    actionSlotManager.addSlot(itemID);\r\n});"],"file":"guilds.js"}