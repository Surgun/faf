{"version":3,"sources":["../../src/js/fortune.js"],"names":["$fortuneBuilding","$","fortuneSlotid","fortuneSlot","container","type","item","rarity","lvl","slotid","state","amt","save","createSave","newContainer","itemContainer","id","loadSave","picName","material","itemLevel","FortuneManager","slots","forEach","slot","saveSlot","push","stageItem","containerID","length","maxSlot","Notifications","fortuneNoSlot","Inventory","containerToItem","undefined","newfortuneSlot","removeContainerFromInventory","refreshFortuneSlots","fortuneByID","fortuneID","find","f","removeFortune","full","fortuneInvFull","fortune","addToInventory","filter","removeLockedFortune","lockFortune","emptySlotCount","getMaterialCost","getProcModifier","line","tier","modifier","mods","s","some","purgeDone","addLevel","$fortuneStage","$fortuneGear","initiateFortuneBldg","show","refreshFortuneGear","empty","locked","append","createFortuneCardLocked","createFortuneCard","i","createFortuneBlank","nonEpic","createFortuneInv","itemdiv","addClass","itemName","html","fortuneButton","attr","appendTo","cost","sacContainer","data","ResourceManager","idToMaterial","img","document","on","e","preventDefault","parseInt","currentTarget","destroyTooltip"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nconst $fortuneBuilding = $(\"#fortuneBuilding\");\r\n\r\nlet fortuneSlotid = 0;\r\n\r\nclass fortuneSlot {\r\n    constructor(container) {\r\n        this.container = container;\r\n        this.type = container.item.type;\r\n        this.rarity = container.rarity;\r\n        this.lvl = container.item.lvl;\r\n        this.slotid = fortuneSlotid;\r\n        this.state = \"unlocked\";\r\n        if (container.rarity === 0) this.amt = 20;\r\n        else if (container.rarity === 1) this.amt = 50;\r\n        else if (container.rarity === 2) this.amt = 100;\r\n        fortuneSlotid += 1;\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.container = this.container.createSave();\r\n        save.type = this.type;\r\n        save.rarity = this.rarity;\r\n        save.lvl = this.lvl;\r\n        save.amt = this.amt;\r\n        save.state = this.state;\r\n        return save;\r\n    }\r\n    loadSave(save) {\r\n        this.type = save.type;\r\n        this.rarity = save.rarity;\r\n        this.lvl = save.lvl;\r\n        const newContainer = new itemContainer(save.container.id,save.container.rarity);\r\n        newContainer.loadSave(save.container);\r\n        this.container = newContainer;\r\n        this.state = save.state;\r\n        this.amt = save.amt;\r\n    }\r\n    lockFortune() {\r\n        this.state = \"locked\";\r\n        this.rarity += 1;\r\n    }\r\n    locked() {\r\n        return this.state === \"locked\";\r\n    }\r\n    picName() {\r\n        return this.container.picName();\r\n    }\r\n    material() {\r\n        return this.container.material();\r\n    }\r\n    itemLevel() {\r\n        return this.container.itemLevel();\r\n    }\r\n}\r\n\r\nconst FortuneManager = {\r\n    slots : [],\r\n    lvl : 1,\r\n    createSave() {\r\n        const save = {};\r\n        save.lvl = this.lvl;\r\n        save.slots = [];\r\n        this.slots.forEach(slot => {\r\n            const saveSlot = slot.createSave();\r\n            save.slots.push(saveSlot);\r\n        });\r\n        return save;\r\n    },\r\n    loadSave(save) {\r\n        save.slots.forEach(slot => {\r\n            const container = new itemContainer(slot.container.id,slot.container.rarity);\r\n            container.loadSave(container);\r\n            const saveSlot = new fortuneSlot(container);\r\n            saveSlot.loadSave(slot);\r\n            this.slots.push(saveSlot);\r\n        });\r\n        this.lvl = save.lvl;\r\n    },\r\n    stageItem(containerID) {\r\n        if (this.slots.length >= this.maxSlot()) {\r\n            Notifications.fortuneNoSlot();\r\n            return;\r\n        }\r\n        const container = Inventory.containerToItem(containerID);\r\n        if (container === undefined) return;\r\n        const newfortuneSlot = new fortuneSlot(container);\r\n        this.slots.push(newfortuneSlot);\r\n        Inventory.removeContainerFromInventory(containerID);\r\n        refreshFortuneSlots();\r\n    },\r\n    fortuneByID(fortuneID) {\r\n        return this.slots.find(f=>f.slotid == fortuneID);\r\n    },\r\n    removeFortune(fortuneID) {\r\n        if (Inventory.full()) {\r\n            Notifications.fortuneInvFull();\r\n            return;\r\n        }\r\n        const fortune = this.fortuneByID(fortuneID);\r\n        Inventory.addToInventory(fortune.container);\r\n        this.slots = this.slots.filter(f=>f.slotid !== fortuneID);\r\n        refreshFortuneSlots();\r\n    },\r\n    removeLockedFortune(fortuneID) {\r\n        this.slots = this.slots.filter(f=>f.slotid !== fortuneID);\r\n        refreshFortuneSlots();\r\n    },\r\n    lockFortune(fortuneID) {\r\n        const fortune = this.fortuneByID(fortuneID);\r\n        fortune.lockFortune();\r\n        refreshFortuneSlots();\r\n    },\r\n    emptySlotCount() {\r\n        return this.maxSlot() - this.slots.length;\r\n    },\r\n    getMaterialCost(slot) {\r\n        if (slot === null) return null;\r\n        return {id:slot.material(),amt:20};\r\n    },\r\n    getProcModifier(line,tier) {\r\n        const modifier = [1,1,1];\r\n        const mods = this.slots.filter(s=>s.type === line && s.lvl === tier);\r\n        mods.forEach(s => {\r\n            modifier[s.rarity-1] = 2;\r\n            s.amt -= 1;\r\n        });\r\n        if (this.slots.some(f=>f.amt <= 0)) this.purgeDone();\r\n        refreshFortuneSlots();\r\n        return modifier;\r\n    },\r\n    maxSlot() {\r\n        return this.lvl;\r\n    },\r\n    purgeDone() {\r\n        this.slots = this.slots.filter(f => f.amt > 0);\r\n        refreshFortuneSlots();\r\n    },\r\n    addLevel() {\r\n        this.lvl += 1;\r\n        refreshFortuneSlots();\r\n    }\r\n}\r\n\r\nconst $fortuneStage = $(\"#fortuneStage\");\r\nconst $fortuneGear = $(\"#fortuneGear\");\r\n\r\nfunction initiateFortuneBldg () {\r\n    $fortuneBuilding.show();\r\n    refreshFortuneSlots();\r\n    refreshFortuneGear();\r\n}\r\n\r\nfunction refreshFortuneSlots() {\r\n    $fortuneStage.empty();\r\n    FortuneManager.slots.forEach(slot => {\r\n        if (slot.locked()) $fortuneStage.append(createFortuneCardLocked(slot));\r\n        else $fortuneStage.append(createFortuneCard(slot));\r\n    });\r\n    for (let i=0;i<FortuneManager.emptySlotCount();i++) {\r\n        $fortuneStage.append(createFortuneBlank());\r\n    }\r\n}\r\n\r\nfunction refreshFortuneGear() {\r\n    $fortuneGear.empty();\r\n    Inventory.nonEpic().forEach(container => {\r\n        $fortuneGear.append(createFortuneInv(container));\r\n    });\r\n}\r\n\r\nfunction createFortuneInv(item) {\r\n    const itemdiv = $(\"<div/>\").addClass(\"fortuneItem\").addClass(\"R\"+item.rarity);\r\n    const itemName = $(\"<div/>\").addClass(\"fortuneItemName itemName\").html(item.picName());\r\n    const itemLevel = $(\"<div/>\").addClass(\"fortuneItemLevel\").html(item.itemLevel());\r\n    const fortuneButton = $(\"<div/>\").addClass(\"fortuneStage\").attr(\"containerID\",item.containerID).html(\"Offer\");\r\n    return itemdiv.append(itemName,itemLevel,fortuneButton);\r\n}\r\n\r\nfunction createFortuneCard(slot) {\r\n    const rarity = [\"Common\",\"Good\",\"Great\",\"Epic\"];\r\n    const itemdiv = $(\"<div/>\").addClass(\"fortuneSlot\").addClass(\"R\"+slot.rarity);\r\n        $(\"<div/>\").addClass(\"fortuneItemName itemName\").html(slot.picName()).appendTo(itemdiv);\r\n        $(\"<div/>\").addClass(\"fortuneItemLevel\").html(slot.itemLevel()).appendTo(itemdiv);\r\n    $(\"<div/>\").addClass(\"fortuneItemDesc\").html(`2x ${rarity[slot.rarity+1]} Chance`).appendTo(itemdiv);\r\n    const cost = FortuneManager.getMaterialCost(slot);\r\n    const sacContainer = $(\"<div/>\").addClass(\"fortuneItemSac\").data(\"fortuneID\",slot.slotid).appendTo(itemdiv);\r\n        $(\"<div/>\").addClass(\"fortune_text\").html(`Sacrifice for`).appendTo(sacContainer);\r\n        $(\"<div/>\").addClass(\"fortune_cost tooltip\").attr({\"data-tooltip\":\"material_desc\",\"data-tooltip-value\":cost.id}).html(`${ResourceManager.idToMaterial(cost.id).img} ${cost.amt}`).appendTo(sacContainer);\r\n    $('<div/>').addClass(\"fortuneItemClose\").data(\"fortuneID\",slot.slotid).html(`<i class=\"fas fa-times\"></i>`).appendTo(itemdiv);\r\n    return itemdiv;\r\n}\r\n\r\nfunction createFortuneCardLocked(slot) {\r\n    const rarity = [\"Common\",\"Good\",\"Great\",\"Epic\"];\r\n    const itemdiv = $(\"<div/>\").addClass(\"fortuneSlot\").addClass(\"R\"+(slot.rarity));\r\n        $(\"<div/>\").addClass(\"fortuneItemName itemName\").html(slot.picName()).appendTo(itemdiv);\r\n        $(\"<div/>\").addClass(\"fortuneItemLevel\").html(slot.itemLevel()).appendTo(itemdiv);\r\n    $(\"<div/>\").addClass(\"fortuneItemDesc\").html(`2x ${rarity[slot.rarity]} Chance`).appendTo(itemdiv);\r\n    $(\"<div/>\").addClass(\"fortuneItemAmt\").html(`${slot.amt} Crafts Left`).appendTo(itemdiv);\r\n    $('<div/>').addClass(\"fortuneItemSetClose\").data(\"fortuneID\",slot.slotid).html(`<i class=\"fas fa-times\"></i>`).appendTo(itemdiv);\r\n    return itemdiv;\r\n}\r\n\r\nfunction createFortuneBlank() {\r\n    const itemdiv = $(\"<div/>\").addClass(\"fortuneSlot\");\r\n        $(\"<div/>\").addClass(\"fortuneSlotEmpty\").html(\"Fortune Available\").appendTo(itemdiv);\r\n    return itemdiv;\r\n}\r\n\r\n\r\n$(document).on('click', '.fortuneStage', (e) => {\r\n    e.preventDefault();\r\n    const containerID = parseInt($(e.currentTarget).attr(\"containerID\"));\r\n    FortuneManager.stageItem(containerID);\r\n    refreshFortuneSlots();\r\n});\r\n\r\n$(document).on('click', '.fortuneItemSac', (e) => {\r\n    e.preventDefault();\r\n    destroyTooltip();\r\n    const fortuneID = parseInt($(e.currentTarget).data(\"fortuneID\"));\r\n    FortuneManager.lockFortune(fortuneID);\r\n    refreshFortuneSlots();\r\n})\r\n\r\n$(document).on('click', '.fortuneItemClose', (e) => {\r\n    e.preventDefault();\r\n    const fortuneID = parseInt($(e.currentTarget).data(\"fortuneID\"));\r\n    FortuneManager.removeFortune(fortuneID);\r\n    refreshFortuneSlots();\r\n});\r\n\r\n$(document).on('click', '.fortuneItemSetClose', (e) => {\r\n    e.preventDefault();\r\n    const fortuneID = parseInt($(e.currentTarget).data(\"fortuneID\"));\r\n    FortuneManager.removeLockedFortune(fortuneID);\r\n    refreshFortuneSlots();\r\n});"],"file":"fortune.js"}