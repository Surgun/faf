{"version":3,"sources":["../../src/js/fuse.js"],"names":["$fuseBuilding","$","fuse","uniqueID","props","uniqueIDProperties","Object","assign","recipe","recipeList","idToItem","id","fuseTime","started","save","undefined","ms","Math","min","getMaxFuse","craftTime","MonsterHall","lineIncrease","type","rarity","notStarted","sharp","FusionManager","slots","lvl","fuseNum","createSave","forEach","slot","push","loadSave","s","fuseID","addFuse","uniqueid","Inventory","hasThree","length","maxSlots","Notifications","noFuseSlots","fuseProps","ResourceManager","materialAvailable","getFuseCost","cantAffordFuse","deductMoney","removeFromInventoryUID","newFuse","refreshFuseSlots","fuseByID","find","f","startFuse","fuseid","increaseRarity","cancelFuse","full","fuseInvFull","addMaterial","addFuseToInventory","filter","addTime","refreshFuseBars","item","value","aFuseIsDone","some","fuseComplete","collectFuse","addLevel","initiateFusionBldg","show","refreshPossibleFuse","createFuseBar","fusePercent","fuseAmt","msToTime","fuseWidth","toFixed","d1","addClass","attr","d1a","s1","css","append","hide","$fuseSlots","$fuseList","empty","d2","html","name","d3","d4","d5","d6","i","rarities","getFusePossibilities","d7","appendTo","formatWithCommas","materialIcon","formatToUnits","document","on","e","preventDefault","destroyTooltip","currentTarget","parseInt"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nconst $fuseBuilding = $(\"#fuseBuilding\");\r\n\r\nclass fuse {\r\n    constructor(uniqueID) {\r\n        const props = uniqueIDProperties(uniqueID);\r\n        Object.assign(this, props);\r\n        this.recipe = recipeList.idToItem(this.id);\r\n        this.fuseTime = 0;\r\n        this.started = false;\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.fuseTime = this.fuseTime;\r\n        save.started = this.started;\r\n        save.uniqueID = this.uniqueID;\r\n        return save;\r\n    }\r\n    loadSave(save) {\r\n        if (save.fuseTime !== undefined) this.fuseTime = save.fuseTime;\r\n        if (save.started !== undefined) this.started = save.started;\r\n    }\r\n    addTime(ms) {\r\n        this.fuseTime = Math.min(this.fuseTime+ms,this.getMaxFuse());\r\n    }\r\n    getMaxFuse() {\r\n        return this.recipe.craftTime*MonsterHall.lineIncrease(this.recipe.type,0)*this.rarity;\r\n    }\r\n    timeRemaining() {\r\n        return this.getMaxFuse() - this.fuseTime;\r\n    }\r\n    fuseComplete() {\r\n        if (this.notStarted()) return false;\r\n        return this.fuseTime === this.getMaxFuse();\r\n    }\r\n    increaseRarity() {\r\n        this.rarity += 1;\r\n        this.uniqueID = this.id+\"_\"+this.rarity+\"_\"+this.sharp;\r\n    }\r\n    notStarted() {\r\n        return !this.started;\r\n    }\r\n}\r\n\r\nconst FusionManager = {\r\n    slots : [],\r\n    lvl : 1,\r\n    fuseNum : 0,\r\n    createSave() {\r\n        const save = {};\r\n        save.lvl = this.lvl;\r\n        save.slots = [];\r\n        this.slots.forEach(slot => {\r\n            save.slots.push(slot.createSave());\r\n        });\r\n        return save;\r\n    },\r\n    loadSave(save) {\r\n        save.slots.forEach(s => {\r\n            const slot = new fuse(s.uniqueID);\r\n            slot.loadSave(s);\r\n            slot.fuseID = this.fuseNum;\r\n            this.fuseNum += 1;\r\n            this.slots.push(slot);\r\n        });\r\n        if (save.lvl !== undefined) this.lvl = save.lvl;\r\n    },\r\n    addFuse(uniqueid) {\r\n        if (!Inventory.hasThree(uniqueid)) return;\r\n        if (this.slots.length === this.maxSlots()) {\r\n            Notifications.noFuseSlots();\r\n            return;\r\n        }\r\n        const fuseProps = uniqueIDProperties(uniqueid);\r\n        if (ResourceManager.materialAvailable(\"M001\") < this.getFuseCost(fuseProps)) {\r\n            Notifications.cantAffordFuse();\r\n            return;\r\n        }\r\n        ResourceManager.deductMoney(this.getFuseCost(fuseProps));\r\n        Inventory.removeFromInventoryUID(uniqueid);\r\n        Inventory.removeFromInventoryUID(uniqueid);\r\n        Inventory.removeFromInventoryUID(uniqueid);\r\n        const newFuse = new fuse(uniqueid);\r\n        newFuse.fuseID = this.fuseNum;\r\n        this.fuseNum += 1;\r\n        this.slots.push(newFuse);\r\n        refreshFuseSlots();\r\n    },\r\n    fuseByID(fuseID) {\r\n        return this.slots.find(f => f.fuseID === fuseID);\r\n    },\r\n    startFuse(fuseid) {\r\n        const fuse = this.fuseByID(fuseid);\r\n        fuse.increaseRarity();    \r\n        fuse.started = true;\r\n        refreshFuseSlots();\r\n    },\r\n    cancelFuse(fuseid) {\r\n        const fuse = this.fuseByID(fuseid);\r\n        if (Inventory.full(3)) {\r\n            Notifications.fuseInvFull();\r\n            return;\r\n        }\r\n        ResourceManager.addMaterial(\"M001\",this.getFuseCost(fuse));\r\n        Inventory.addFuseToInventory(fuse);\r\n        Inventory.addFuseToInventory(fuse);\r\n        Inventory.addFuseToInventory(fuse);\r\n        this.slots = this.slots.filter(f=>f.fuseID !== fuseid);\r\n        refreshFuseSlots();\r\n    },\r\n    addTime(ms) {\r\n        this.slots.forEach(fuse => {\r\n            if (fuse.started) fuse.addTime(ms);\r\n        });\r\n        refreshFuseBars();\r\n    },\r\n    getFuseCost(fuse) {\r\n        const item = recipeList.idToItem(fuse.id);\r\n        return 4*item.value*fuse.rarity;\r\n    },\r\n    aFuseIsDone() {\r\n        return this.slots.some(f=>f.fuseComplete());\r\n    },\r\n    collectFuse(fuseID) {\r\n        const slot = this.slots.find(f=>f.fuseID === fuseID);\r\n        if (slot === undefined || !slot.fuseComplete()) return;\r\n        if (Inventory.full()) {\r\n            Notifications.fuseInvFull();\r\n            return;\r\n        }\r\n        Inventory.addFuseToInventory(slot);\r\n        this.slots = this.slots.filter(f=>f.fuseID !== fuseID);\r\n        refreshFuseSlots();\r\n    },\r\n    maxSlots() {\r\n        return 1+this.lvl;\r\n    },\r\n    addLevel() {\r\n        this.lvl += 1;\r\n        refreshFuseSlots();\r\n    },\r\n    getMaxFuse(uniqueIDProperties) {\r\n        //this takes a uniqueIDProperties return (which is only from the fusion creation screen) to give fuse time\r\n        const recipe = recipeList.idToItem(uniqueIDProperties.id);\r\n        return recipe.craftTime*MonsterHall.lineIncrease(recipe.type,0)*uniqueIDProperties.rarity;\r\n    }\r\n}\r\n\r\nfunction initiateFusionBldg() {\r\n    $fuseBuilding.show();\r\n    refreshFuseSlots();\r\n    refreshPossibleFuse();\r\n}\r\n\r\nfunction createFuseBar(fuse) {\r\n    const fusePercent = fuse.fuseTime/fuse.getMaxFuse();\r\n    const fuseAmt = msToTime(fuse.getMaxFuse()-fuse.fuseTime);\r\n    const fuseWidth = (fusePercent*100).toFixed(1)+\"%\";\r\n    const d1 = $(\"<div/>\").addClass(\"fuseBarDiv\").attr(\"id\",\"fuseBarDiv\"+fuse.fuseID);\r\n    const d1a = $(\"<div/>\").addClass(\"fuseBar\").attr(\"data-label\",fuseAmt).attr(\"id\",\"fuseBar\"+fuse.fuseID);\r\n    const s1 = $(\"<span/>\").addClass(\"fuseBarFill\").attr(\"id\",\"fuseFill\"+fuse.fuseID).css('width', fuseWidth);\r\n    return d1.append(d1a,s1);\r\n}\r\n\r\nfunction refreshFuseBars() {\r\n    FusionManager.slots.forEach(fuse => {\r\n        if (fuse.fuseComplete()) {\r\n            $(\"#fuseBarDiv\"+fuse.fuseID).hide();\r\n            $(\"#fuseSlotCollect\"+fuse.fuseID).show();\r\n        }\r\n        const fusePercent = fuse.fuseTime/fuse.getMaxFuse();\r\n        const fuseAmt = msToTime(fuse.getMaxFuse()-fuse.fuseTime);\r\n        const fuseWidth = (fusePercent*100).toFixed(1)+\"%\";\r\n        $(\"#fuseBar\"+fuse.fuseID).attr(\"data-label\",fuseAmt);\r\n        $(\"#fuseFill\"+fuse.fuseID).css('width', fuseWidth);\r\n    });\r\n}\r\n\r\nconst $fuseSlots = $(\"#fuseSlots\");\r\nconst $fuseList = $(\"#fuseList\");\r\n\r\nfunction refreshFuseSlots() {\r\n    $fuseSlots.empty();\r\n    FusionManager.slots.forEach(slot => {\r\n        const d1 = $(\"<div/>\").addClass(\"fuseSlot\").addClass(\"R\"+slot.rarity);\r\n        const d2 = $(\"<div/>\").addClass(\"fuseSlotName itemName\").html(slot.name);\r\n        const d3 = createFuseBar(slot);\r\n        const d4 = $(\"<div/>\").addClass(\"fuseSlotCollect\").attr(\"id\",\"fuseSlotCollect\"+slot.fuseID).attr(\"fuseid\",slot.fuseID).html(\"Collect Fuse\").hide();\r\n        const d5 = $(\"<div/>\").addClass(\"fuseSlotStart\").attr(\"id\",\"fuseSlotStart\"+slot.fuseID).attr(\"fuseid\",slot.fuseID).html(\"Start Fuse\").hide();\r\n        const d6 = $('<div/>').addClass(\"fuseClose\").attr(\"fuseid\",slot.fuseID).html(`<i class=\"fas fa-times\"></i>`).hide();\r\n        if (slot.fuseComplete()) {\r\n            d3.hide();\r\n            d4.show();\r\n        }\r\n        if (slot.notStarted()) {\r\n            d3.hide();\r\n            d5.show();\r\n            d6.show();\r\n        }\r\n        d1.append(d2,d3,d4,d5,d6);\r\n        $fuseSlots.append(d1);\r\n    });\r\n    for (let i=0;i<FusionManager.maxSlots()-FusionManager.slots.length;i++) {\r\n        const d4 = $(\"<div/>\").addClass(\"fuseSlot\");\r\n        const d5 = $(\"<div/>\").addClass(\"fuseSlotName itemName\").html(\"Empty\");\r\n        d4.append(d5);\r\n        $fuseSlots.append(d4);\r\n    }\r\n}\r\n\r\nfunction refreshPossibleFuse() {\r\n    $fuseList.empty();\r\n    const d1 = $(\"<div/>\").addClass(\"possibleFuseHead\").html(\"Possible Fuses\");\r\n    const d2 = $(\"<div/>\").addClass('possibleFuseHolder');\r\n    const rarities = [\"Common\",\"Good\",\"Great\",\"Epic\"];\r\n    if(Inventory.getFusePossibilities().length === 0) d2.addClass(\"fuseInvBlank\").html(\"No Items Available to Fuse\");\r\n    if(Inventory.getFusePossibilities().length > 0) {\r\n        Inventory.getFusePossibilities().forEach(f => {\r\n            const d3 = $(\"<div/>\").addClass(\"possibleFusegroup\");\r\n            const d4 = $(\"<div/>\").addClass(\"possibleFusegroupHeader\").addClass(\"possibleFuseRarity\"+f.rarity).html(`${rarities[f.rarity]} Fuse`)\r\n            const d5 = $(\"<div/>\").addClass(\"possibleFuse\").html(f.name);\r\n            const d6 = $(\"<div/>\").addClass(\"fuseTime tooltip\").attr(\"data-tooltip\",\"fuse_time\").html(`<i class=\"fas fa-clock\"></i> ${msToTime(FusionManager.getMaxFuse(f))}`);\r\n            const d7 = $(\"<div/>\").addClass(\"fuseStart\").attr(\"uniqueid\",f.uniqueID);\r\n                $(\"<div/>\").addClass(\"fuseStartText\").html(\"Fuse\").appendTo(d7);\r\n                $(\"<div/>\").addClass(\"fuseStartCost tooltip\").attr({\"data-tooltip\": \"gold_value\", \"data-tooltip-value\": formatWithCommas(FusionManager.getFuseCost(f))}).html(`${ResourceManager.materialIcon(\"M001\")}${formatToUnits(FusionManager.getFuseCost(f),2)}`).appendTo(d7);\r\n            d3.append(d4,d5,d6,d7);\r\n            d2.append(d3);\r\n        });\r\n    }\r\n    $fuseList.append(d1,d2);\r\n}\r\n    \r\n$(document).on('click', '.fuseStart', (e) => {\r\n    e.preventDefault();\r\n    destroyTooltip();\r\n    const uniqueid = $(e.currentTarget).attr(\"uniqueid\");\r\n    FusionManager.addFuse(uniqueid);\r\n});\r\n\r\n$(document).on('click', '.fuseClose', (e) => {\r\n    e.preventDefault();\r\n    const fuseid = parseInt($(e.currentTarget).attr(\"fuseid\"));\r\n    FusionManager.cancelFuse(fuseid);\r\n})\r\n\r\n$(document).on('click', '.fuseSlotStart', (e) => {\r\n    e.preventDefault();\r\n    const fuseid = parseInt($(e.currentTarget).attr(\"fuseid\"));\r\n    FusionManager.startFuse(fuseid);\r\n});\r\n\r\n$(document).on('click', '.fuseSlotCollect', (e) => {\r\n    e.preventDefault();\r\n    const id = parseInt($(e.currentTarget).attr(\"fuseid\"));\r\n    FusionManager.collectFuse(id);\r\n});"],"file":"fuse.js"}