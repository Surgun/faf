{"version":3,"sources":["../../src/js/dungeonAssign.js"],"names":["$dungeonSelect","$","$areaSelect","$areaTeamSelect","$dungeonRun","$dungeonRewards","$areaListings","$DungeonSideBarTeam","dungeonsTabClicked","DungeonManager","dungeonView","AreaManager","areaView","show","hide","refreshAreaSelect","empty","areas","forEach","area","createAreaBlock","appendTo","statuses","d","addClass","data","id","html","name","status","DungeonStatus","ADVENTURING","d2","activeParty","heroes","h","head","document","on","e","preventDefault","areaID","currentTarget","screenDirectDungeon","abandonAllDungeons","idToArea","showDungeon","activeDungeonID","dungeonStatus","dungeonID","COLLECT","showDungeonReward","EMPTY","startPartyCreation","BattleLog","clear","initiateDungeonFloor","abandonCurrentDungeon","$floorID","$dungeonHeroList","$dungeonMobList","$drTurnOrder","dungeon","getCurrentDungeon","removeClass","type","floorCount","rewards","getRewards","$floorRewards","amt","ResourceManager","materialIcon","party","hero","d1","d3","image","d4","attr","uniqueid","append","prepend","mobs","mob","d6","d7","d8","d9","hp","progressNextFloor","$toggleProgress","generateTurnOrder","BuffRefreshManager","hardRefreshBuff","order","getOrder","unit","i","createHPBar","d1a","generateSkillIcons","css","refreshTurnOrder","refreshSkillUnit","target","getCurrentID","skillNum","getActiveSkill","skillIDs","getSkillIDs","getSkillIcons","icon","$dungeonTab","initializeSideBarDungeon","dungeons","createDungeonSidebarReward","refreshDungeonFarmStatus","dungeonid","dungeonByID","refreshSidebarDungeonMats","tag","hpPercent","maxHP","hpBarText","hpWidth","toFixed","options","prefix","tooltip","miscIcons","text","textID","width","fill","generateProgressBar","refreshBeatBar","dungeonTime","beatWidth","speed","refreshHPBar","haveReward","materialAvailable","matWidth","t1","toString","refreshDungeonMatBar"],"mappings":"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","sourcesContent":["/*Dungeons consist of three sets of screens:\r\nClicking on the \"Adventures\" tab will relocate to the area screen.\r\nThis screen JUST has a list of areas on it. You can see the status\r\nof any areas (as well as which are available).\r\n\r\nClicking on a area WITHOUT a team there brings you to the party selection\r\nscreen, where you can select the dungeon and a party. Confirming\r\na party locks it in and begins the dungeon and brings you to third screen\r\n\r\nAdventure screen! Get here by clicking on an area with a group or confirming\r\na group...\r\n*/\r\n\r\n//tabs\r\nconst $dungeonSelect = $(\"#dungeonSelect\");\r\nconst $areaSelect = $(\"#areaSelect\");\r\nconst $areaTeamSelect = $(\"#areaTeamSelect\");\r\nconst $dungeonRun = $(\"#dungeonRun\");\r\nconst $dungeonRewards = $(\"#dungeonRewards\");\r\n\r\n//area screen\r\nconst $areaListings = $(\"#areaListings\");\r\n\r\nconst $DungeonSideBarTeam = $(\"#DungeonSideBarTeam\");\r\n\r\n/*---------------------------\r\n  -     AREA SELECT CODE    -\r\n  ---------------------------*/\r\n\r\nfunction dungeonsTabClicked() {\r\n    DungeonManager.dungeonView = null;\r\n    AreaManager.areaView = null;\r\n    $areaSelect.show();\r\n    $areaTeamSelect.hide();\r\n    $dungeonRun.hide();\r\n    $dungeonRewards.hide();\r\n    refreshAreaSelect();\r\n}\r\n\r\nfunction refreshAreaSelect() {\r\n    $areaListings.empty();\r\n    AreaManager.areas.forEach(area => {\r\n        createAreaBlock(area).appendTo($areaListings);\r\n    });\r\n}\r\n\r\nfunction createAreaBlock(area) {\r\n    const statuses = [\"Idle\",\"Fight In Progress\",\"Run Complete\"];\r\n    const d = $(\"<div/>\").addClass(\"areaContainer\").data(\"areaID\",area.id);\r\n    $(\"<div/>\").addClass(\"areaHeader\").html(area.name).appendTo(d);\r\n    $(\"<div/>\").addClass(\"areaStatus\").html(statuses[area.status()]).appendTo(d);\r\n    $(\"<div/>\").addClass(\"dungeonBackground\").appendTo(d);\r\n    if (area.status() === DungeonStatus.ADVENTURING) {\r\n        const d2 = $(\"<div/>\").addClass(\"areaAdventurers\").appendTo(d);\r\n        area.activeParty().heroes.forEach(h=> {\r\n            $(\"<div/>\").addClass(\"areaHero\").html(h.head).appendTo(d2);\r\n        });\r\n    }\r\n    return d;    \r\n}\r\n\r\n//click on a dungeon to start making a team!\r\n$(document).on(\"click\", \".areaContainer\", (e) => {\r\n    e.preventDefault();\r\n    const areaID = $(e.currentTarget).data(\"areaID\");\r\n    AreaManager.areaView = areaID;\r\n    screenDirectDungeon(areaID);\r\n});\r\n\r\n$(document).on(\"click\", \"#dAbandonAll\", (e) => {\r\n    e.preventDefault();\r\n    DungeonManager.abandonAllDungeons();\r\n});\r\n\r\nfunction screenDirectDungeon(areaID) {\r\n    $areaSelect.hide();\r\n    const area = AreaManager.idToArea(areaID);\r\n    if (area.status() === DungeonStatus.ADVENTURING) showDungeon(area.activeDungeonID());\r\n    else if (DungeonManager.dungeonStatus(dungeonID) === DungeonStatus.COLLECT) showDungeonReward(area.activeDungeonID(),false);\r\n    else if (area.status() === DungeonStatus.EMPTY) startPartyCreation(area);\r\n}\r\n\r\n/*-----------------------------------------\r\n/*-   DUNGEON RUNNING CODE\r\n/*-----------------------------------------*/\r\n\r\nfunction showDungeon(dungeonID) {\r\n    DungeonManager.dungeonView = dungeonID;\r\n    $dungeonRun.show();\r\n    BattleLog.clear();\r\n    initiateDungeonFloor(dungeonID);\r\n}\r\n\r\n$(document).on(\"click\", \"#dungeonAbandon\", (e) => {\r\n    e.preventDefault();\r\n    DungeonManager.abandonCurrentDungeon();\r\n})\r\n\r\n\r\nconst $floorID = $(\"#floorID\");\r\nconst $dungeonHeroList = $(\"#dungeonHeroList\");\r\nconst $dungeonMobList = $(\"#dungeonMobList\");\r\nconst $drTurnOrder = $(\"#drTurnOrder\");\r\n\r\nfunction initiateDungeonFloor(dungeonID) {\r\n    if (DungeonManager.dungeonView !== dungeonID) return;\r\n    const dungeon = DungeonManager.getCurrentDungeon();\r\n    $dungeonRun.removeClass().addClass(dungeon.id);\r\n    if (dungeon.type === \"boss\") $dungeonRun.addClass(\"DBoss\");\r\n    $floorID.html(\"Floor \"+dungeon.floorCount);\r\n    const rewards = dungeon.getRewards();\r\n    if (dungeon.type === \"normal\") $floorRewards.html(`Earning ${rewards.amt} ${ResourceManager.materialIcon(rewards.id)} per clear`)\r\n    $dungeonHeroList.empty();\r\n    $dungeonMobList.empty();\r\n    dungeon.party.heroes.forEach(hero => {\r\n        const d1 = $(\"<div/>\").addClass(\"dfc\");\r\n        const d2 = $(\"<div/>\").addClass(\"dfcName\").html(hero.name);\r\n        const d3 = $(\"<div/>\").addClass(\"dfcImage\").html(hero.image);\r\n        const d4 = $(\"<div/>\").addClass(\"buffListContent\").attr(\"id\",\"buffList\"+hero.uniqueid);\r\n        d1.append(d2,d3,d4);\r\n        $dungeonHeroList.prepend(d1);\r\n    });\r\n    dungeon.mobs.forEach((mob) => {\r\n        const d6 = $(\"<div/>\").addClass(\"dfm\").attr(\"id\",\"dfm\"+mob.uniqueid);\r\n        const d7 = $(\"<div/>\").addClass(\"dfmName\").html(mob.name);\r\n        const d8 = $(\"<div/>\").addClass(\"dfmImage\").attr(\"id\",\"mobImage\"+mob.uniqueid).html(mob.image);\r\n        const d9 = $(\"<div/>\").addClass(\"buffListContent\").attr(\"id\",\"buffList\"+mob.uniqueid);\r\n        d6.append(d7,d8,d9);\r\n        if (mob.hp === 0) d6.addClass(\"mobDead\");\r\n        $dungeonMobList.prepend(d6);\r\n    });\r\n    if (dungeon.progressNextFloor) $toggleProgress.html(\"Progressing\");\r\n    else $toggleProgress.html(\"Farming\");\r\n    generateTurnOrder(dungeonID);\r\n    BuffRefreshManager.hardRefreshBuff();\r\n}\r\n\r\nfunction generateTurnOrder(dungeonID) {\r\n    if (DungeonManager.dungeonView !== dungeonID) return;\r\n    $drTurnOrder.empty();\r\n    const dungeon = DungeonManager.getCurrentDungeon();\r\n    dungeon.order.getOrder().forEach((unit,i) => {\r\n        const d1 = $(\"<div/>\").addClass(\"orderUnit\").appendTo($drTurnOrder);\r\n        $(\"<div/>\").addClass(\"orderUnitHeadImg\").html(unit.head).appendTo(d1);\r\n        $(\"<div/>\").addClass(\"orderUnitHead\").html(unit.name).appendTo(d1);\r\n        $(\"<div/>\").addClass(\"orderUnitHP\").html(createHPBar(unit,\"turnOrder\")).appendTo(d1);\r\n        const d1a = $(\"<div/>\").attr(\"id\",\"orderSkills\"+unit.uniqueid).appendTo(d1);\r\n        generateSkillIcons(unit).appendTo(d1a);\r\n        const d2 = $(\"<div/>\").addClass(\"beatBarDiv\").appendTo(d1);\r\n        $(\"<span/>\").addClass(\"beatBarFill\").attr(\"id\",\"beatbarFill\"+unit.uniqueid).css('width', \"0%\").appendTo(d2);\r\n    });\r\n    refreshTurnOrder(dungeonID);\r\n}\r\n\r\nfunction refreshSkillUnit(target) {\r\n    const d = $(\"#orderSkills\"+target.uniqueid).empty();\r\n    generateSkillIcons(target).appendTo(d);\r\n}\r\n\r\nfunction refreshTurnOrder(dungeonID) {\r\n    if (DungeonManager.dungeonView !== dungeonID) return;\r\n    const dungeon = DungeonManager.getCurrentDungeon();\r\n    const uniqueid = dungeon.order.getCurrentID();\r\n    $(\".orderUnit\").removeClass(\"orderUnitActive\");\r\n    $(\"#orderUnit\"+uniqueid).addClass(\"orderUnitActive\");\r\n    $(\".orderUnitSkill\").removeClass(\"orderUnitActiveSkill\");\r\n    dungeon.order.getOrder().forEach(unit => {\r\n        const skillNum = unit.getActiveSkill();\r\n        $(\"#oUS\"+unit.uniqueid+skillNum).addClass(\"orderUnitActiveSkill\")\r\n    });\r\n}\r\n\r\nfunction generateSkillIcons(unit) {\r\n    const d1 = $(\"<div/>\").addClass(\"orderUnitSkills\");\r\n    const skillIDs = unit.getSkillIDs();\r\n    unit.getSkillIcons().forEach((icon,i) => {\r\n        $(\"<div/>\").addClass(\"orderUnitSkill tooltip\").attr({\"id\":\"oUS\"+unit.uniqueid+i,\"data-tooltip\":\"skill_desc\",\"data-tooltip-value\":skillIDs[i]}).html(icon).appendTo(d1);\r\n    });\r\n    return d1;\r\n}\r\n\r\nconst $dungeonTab = $(\"#dungeonTab\");\r\n\r\nfunction initializeSideBarDungeon() {\r\n    $DungeonSideBarTeam.empty();\r\n    DungeonManager.dungeons.forEach(dungeon => {\r\n        if (dungeon.type !== \"regular\" && dungeon.status === DungeonStatus.EMPTY) return;\r\n        const d = $(\"<div/>\").addClass(\"dungeonGroup\").appendTo($DungeonSideBarTeam);\r\n        const d1 = $(\"<div/>\").addClass(\"DungeonSideBarStatus\").data(\"dungeonID\",dungeon.id).appendTo(d);\r\n        if (dungeon.type === \"regular\" && dungeon.status === DungeonStatus.ADVENTURING) {\r\n            d1.addClass(\"DungeonSideBarAdventuring\");\r\n            const d2 = $(\"<div/>\").addClass(\"dungeonFarmStatus\").attr(\"id\",\"dungeonFarm\"+dungeon.id).data(\"gid\",dungeon.id).html(`<i class=\"fas fa-recycle\"></i>`).appendTo(d1);\r\n            if (!dungeon.progressNextFloor) d2.addClass(\"dungeonFarmActive\");\r\n            $(\"<div/>\").addClass(\"dungeonSidebarFloor\").attr(\"id\",\"dsb\"+dungeon.id).html(`${dungeon.name} - ${dungeon.floorCount}`).appendTo(d1);\r\n            if (dungeon.type !== \"boss\") $(\"<div/>\").addClass(\"dungeonSidebarReward\").html(createDungeonSidebarReward(dungeon.getRewards(),dungeon.id)).appendTo(d);\r\n        }\r\n        else d1.html(`${dungeon.name}`);\r\n    });\r\n}\r\n\r\nfunction refreshDungeonFarmStatus(dungeonid) {\r\n    const dungeon = DungeonManager.dungeonByID(dungeonid);\r\n    if (dungeon.type === \"boss\") return;\r\n    if (dungeon.progressNextFloor) $(\"#dungeonFarm\"+dungeonid).removeClass(\"dungeonFarmActive\");\r\n    else $(\"#dungeonFarm\"+dungeonid).addClass(\"dungeonFarmActive\");\r\n}\r\n\r\nfunction refreshSidebarDungeonMats(dungeonID) {\r\n    const dungeon = DungeonManager.dungeonByID(dungeonID);\r\n    if (dungeon.type === \"boss\") return;\r\n    const rewards = dungeon.getRewards();\r\n    $(`#dRR${dungeonID} .dungeonRewardRateIcon`).html(ResourceManager.materialIcon(rewards.id));\r\n    $(`#dRR${dungeonID} .dungeonRewardRateAmt`).html(`+${rewards.amt}`);\r\n}\r\n\r\nfunction createHPBar(hero,tag) {\r\n    const hpPercent = hero.hp/hero.maxHP();\r\n    const hpBarText = hero.hp+\" / \"+hero.maxHP();\r\n    const hpWidth = (hpPercent*100).toFixed(1)+\"%\";\r\n    const options = {\r\n        prefix: \"hp\",\r\n        tooltip: \"hp\",\r\n        icon: miscIcons.hp,\r\n        text: hpBarText,\r\n        textID: \"hp\"+tag+hero.uniqueid,\r\n        width: hpWidth,\r\n        fill: \"hpFill\"+tag+hero.uniqueid\r\n    }\r\n    return generateProgressBar(options);\r\n}\r\n\r\nfunction refreshBeatBar(uniqueid,dungeonTime) {\r\n    const beatWidth = (dungeonTime/DungeonManager.speed*100).toFixed(1)+\"%\";\r\n    $(\"#beatbarFill\"+uniqueid).css('width',beatWidth);\r\n}\r\n\r\nfunction refreshHPBar(hero) {\r\n    const hpPercent = hero.hp/hero.maxHP();\r\n    const hpBarText = hero.hp+\" / \"+hero.maxHP();\r\n    const hpWidth = (hpPercent*100).toFixed(1)+\"%\";\r\n    $(`#hpturnOrder${hero.uniqueid}`).html(hpBarText);\r\n    $(`#hpFillturnOrder${hero.uniqueid}`).css('width', hpWidth);\r\n}\r\n\r\nfunction createDungeonSidebarReward(rewards,dungeonid) {\r\n    const haveReward = ResourceManager.materialAvailable(rewards.id);\r\n    const matWidth = (haveReward/10).toFixed(1)+\"%\";\r\n    const d = $(\"<div/>\").addClass(\"dungeonRewardDiv\");\r\n        const t1 = $(\"<div/>\").addClass(\"dungeonRewardRate\").attr(\"id\",\"dRR\"+dungeonid).appendTo(d);\r\n            $(\"<div/>\").addClass(\"dungeonRewardRateIcon\").html(`${ResourceManager.materialIcon(rewards.id)}`).appendTo(t1);\r\n            $(\"<div/>\").addClass(\"dungeonRewardRateAmt\").html(`+${rewards.amt}`).appendTo(t1);\r\n    const options = {\r\n        prefix: \"dungeonReward\",\r\n        text: haveReward.toString(),\r\n        textID: \"dsbr\"+dungeonid, \r\n        width: matWidth,\r\n        fill: \"dsbrf\"+dungeonid\r\n    }\r\n    return d.append(generateProgressBar(options));\r\n}\r\n\r\nfunction refreshDungeonMatBar(dungeonid) {\r\n    const rewards = DungeonManager.dungeonByID(dungeonid).getRewards();\r\n    const haveReward = ResourceManager.materialAvailable(rewards.id);\r\n    const matWidth = (haveReward/10).toFixed(1)+\"%\";\r\n    $(\"#dsbr\"+dungeonid).html(haveReward);\r\n    $(\"#dsbrf\"+dungeonid).css('width',matWidth);\r\n}\r\n"],"file":"dungeonAssign.js"}