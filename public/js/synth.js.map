{"version":3,"sources":["../../src/js/synth.js"],"names":["synthToggle","Object","freeze","DESYNTH","RESYNTH","$synthPowerResynthesis","$","SynthManager","slot","resynth","setting","state","time","cookTime","lvl","createSave","save","loadSave","undefined","container","itemContainer","id","rarity","possibleSynth","Inventory","higherRarity","toggleStatus","status","refreshDesynth","refreshResynth","addSynth","containerID","containerToItem","removeContainerFromInventory","initiateSynthBldg","removeSynth","full","Notifications","synthCollectInvFull","addToInventory","clearResynthSlot","stageButton","startDesynth","startResynth","collectSynth","synthBarText","cost","resynthCosts","ResourceManager","available","M700","M701","M702","insufficientResynthMats","addMaterial","hide","addTime","ms","refreshSynthBar","transform","resynthChange","refreshSynthStage","reward","desynthRewards","amt","synthCollect","idToMaterial","name","increase","mod","Math","floor","item","craftTime","resynthCost","baseline","maxRatio","powRatio","hpRatio","techRatio","change","fillResynthSlot","value","ratio","max","$synthBuilding","$synthSlot","$synthList","$synthRewardCard","$synthRewardAmt","$synthReward","show","refreshSynthInventory","refreshSynthButtons","empty","addClass","html","appendTo","d1","length","forEach","createSynthCard","createSynthStageCard","$desynthRewards","$resynthCost","$resynthMaterial","$resynthMaterials","removeClass","img","attr","idAmts","mats","mat","data","createSynthBar","text","synthPercent","synthWidth","toFixed","d1a","s1","css","append","document","on","e","preventDefault","parseInt","currentTarget","type","itemdiv","itemName","picName","itemRarity","rarities","toLowerCase","miscIcons","itemLevel","itemProps","entries","itemStat","stat","val","synthButton","stageRemove","synthStatProps"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nconst synthToggle = Object.freeze({DESYNTH:0,RESYNTH:1});\r\n\r\nconst $synthPowerResynthesis = $(\"#synthPowerResynthesis\");\r\n\r\nconst SynthManager = {\r\n    slot : null,\r\n    resynth : null,\r\n    setting : synthToggle.DESYNTH,\r\n    state : \"empty\",\r\n    time : 0,\r\n    cookTime : 3000,\r\n    lvl : 1,\r\n    createSave() {\r\n        const save = {};\r\n        if (this.slot !== null) save.slot = this.slot.createSave();\r\n        save.state = this.state;\r\n        save.lvl = this.lvl;\r\n        save.resynth = this.resynth;\r\n        save.setting = this.setting;\r\n        return save;\r\n    },\r\n    loadSave(save) {\r\n        if (save.slot !== undefined) {\r\n            const container = new itemContainer(save.slot.id,save.slot.rarity);\r\n            container.loadSave(save.slot);\r\n            this.slot = container;\r\n        }\r\n        if (save.state !== undefined) this.state = save.state;\r\n        if (save.lvl !== undefined) this.lvl = save.lvl;\r\n        if (save.resynth !== undefined) this.resynth = save.resynth;\r\n        if (save.setting !== undefined) this.setting = save.setting;\r\n    },\r\n    possibleSynth() {\r\n        return Inventory.higherRarity();\r\n    },\r\n    toggleStatus(status) {\r\n        if (this.state !== \"empty\" && this.state !== \"staged\") return;\r\n        if (status === synthToggle.DESYNTH && this.setting !== synthToggle.DESYNTH) {\r\n            this.setting = synthToggle.DESYNTH;\r\n            refreshDesynth();\r\n        }\r\n        if (status === synthToggle.RESYNTH && this.setting !== synthToggle.RESYNTH && this.lvl > 1) {\r\n            this.setting = synthToggle.RESYNTH;\r\n            refreshResynth();\r\n        }\r\n    },\r\n    addSynth(containerID) {\r\n        if (this.slot !== null || this.state !== \"empty\") return;\r\n        const container = Inventory.containerToItem(containerID);\r\n        Inventory.removeContainerFromInventory(containerID);\r\n        this.slot = container;\r\n        this.state = \"staged\";\r\n        initiateSynthBldg();\r\n    },\r\n    removeSynth() {\r\n        if (this.state !== \"staged\") return;\r\n        if (Inventory.full()) {\r\n            Notifications.synthCollectInvFull();\r\n            return;\r\n        }\r\n        Inventory.addToInventory(this.slot);\r\n        this.slot = null;\r\n        this.state = \"empty\";\r\n        this.resynth = null;\r\n        this.clearResynthSlot();\r\n        initiateSynthBldg();\r\n    },\r\n    stageButton() {\r\n        if (this.state === \"staged\" && this.setting === synthToggle.DESYNTH) this.startDesynth();\r\n        if (this.state === \"staged\" && this.setting === synthToggle.RESYNTH) this.startResynth();\r\n        if (this.state === \"complete\") this.collectSynth();\r\n    },\r\n    startDesynth() {\r\n        this.state = \"desynthing\";\r\n        synthBarText(\"\");\r\n        this.time = this.cookTime;\r\n    },\r\n    startResynth() {\r\n        if (this.state !== \"staged\" || this.resynth === null) return;\r\n        const cost = this.resynthCosts();\r\n        if (!ResourceManager.available(\"M700\",cost.M700) || !ResourceManager.available(\"M701\",cost.M701) || !ResourceManager.available(\"M702\",cost.M702)) {\r\n            Notifications.insufficientResynthMats();\r\n            return;\r\n        }\r\n        ResourceManager.addMaterial(\"M700\",-cost.M700,false);\r\n        ResourceManager.addMaterial(\"M701\",-cost.M701,false);\r\n        ResourceManager.addMaterial(\"M702\",-cost.M702,false);\r\n        this.state = \"resynthing\";\r\n        synthBarText(\"\");\r\n        $(\"#synthRemove\").hide();\r\n        this.time = this.cookTime;\r\n    },\r\n    addTime(ms) {\r\n        if (this.state !== \"desynthing\" && this.state !== \"resynthing\") return;\r\n        this.time -= ms;\r\n        if (this.time > 0) return refreshSynthBar();\r\n        this.time = 0;\r\n        if (this.state === \"desynthing\") this.slot.rarity -= 1;\r\n        if (this.state === \"resynthing\") this.slot.transform(this.resynthChange());\r\n        this.state = \"complete\";\r\n        this.resynth = null;\r\n        synthBarText(\"Collect\");\r\n        refreshSynthStage();\r\n        refreshResynth();\r\n    },\r\n    collectSynth() {\r\n        if (this.state !== \"complete\") return;\r\n        if (Inventory.full()) {\r\n            Notifications.synthCollectInvFull();\r\n            return;\r\n        }\r\n        if (this.setting === synthToggle.DESYNTH) {\r\n            const reward = this.desynthRewards(true);\r\n            ResourceManager.addMaterial(reward.id,reward.amt);\r\n            Notifications.synthCollect(ResourceManager.idToMaterial(reward.id).name,reward.amt);\r\n        }\r\n        Inventory.addToInventory(this.slot);\r\n        this.slot = null;\r\n        this.state = \"empty\";\r\n        this.resynth = null;\r\n        initiateSynthBldg();\r\n    },\r\n    desynthRewards(increase) {\r\n        const mod = increase ? 1 : 0;\r\n        if (this.slot === null) return null;\r\n        const reward = {};\r\n        if (this.slot.rarity + mod === 1) reward.id = \"M700\";\r\n        if (this.slot.rarity + mod === 2) reward.id = \"M701\";\r\n        if (this.slot.rarity + mod === 3) reward.id = \"M702\";\r\n        reward.amt = Math.floor(this.slot.item.craftTime / 4000);\r\n        return reward;\r\n    },\r\n    resynthCosts() {\r\n        const resynthCost = {M700 : 0, M701 : 0, M702 : 0}\r\n        if (this.slot === null) return resynthCost;\r\n        const baseline = Math.floor(this.slot.item.craftTime / 4000);\r\n        if (this.slot.maxRatio() === 3) {\r\n            resynthCost.M700 = this.slot.powRatio === 3 ? 0 : baseline;\r\n            resynthCost.M701 = this.slot.hpRatio === 3 ? 0 : baseline;\r\n            resynthCost.M702 = this.slot.techRatio === 3 ? 0 : baseline;\r\n        }\r\n        else {\r\n            resynthCost.M700 = this.slot.powRatio === 0 ? 0 : baseline;\r\n            resynthCost.M701 = this.slot.hpRatio === 0 ? 0 : baseline;\r\n            resynthCost.M702 = this.slot.techRatio === 0 ? 0 : baseline;\r\n        }\r\n        return resynthCost;\r\n    },\r\n    resynthChange() {\r\n        const change = [0,0,0];\r\n        if (this.slot === null || this.resynth === null) return change;\r\n        if (this.resynth === \"M700\") {\r\n            change[0] += 1;\r\n            change[1] -= 1;\r\n            change[2] -= 1;\r\n        }\r\n        if (this.resynth === \"M701\") {\r\n            change[0] -= 1;\r\n            change[1] += 1;\r\n            change[2] -= 1;\r\n        }\r\n        if (this.resynth === \"M702\") {\r\n            change[0] -= 1;\r\n            change[1] -= 1;\r\n            change[2] += 1;\r\n        }\r\n        return change;\r\n    },\r\n    clearResynthSlot() {\r\n        if (this.state !== \"staged\") return;\r\n        this.resynth = null;\r\n        refreshResynth();\r\n    },\r\n    fillResynthSlot(value) {\r\n        if (this.state !== \"staged\") return;\r\n        const ratio = {\"M700\":SynthManager.slot.powRatio, \"M701\":SynthManager.slot.hpRatio, \"M702\":SynthManager.slot.techRatio};\r\n        const maxRatio = Math.max(SynthManager.slot.powRatio,SynthManager.slot.hpRatio,SynthManager.slot.techRatio);\r\n        if (maxRatio === 3) {\r\n            //we are all-in on a material, ratio = 3 is the one we can't use\r\n            if (ratio[value] === 3) return;\r\n            this.resynth = value;\r\n        }\r\n        else if (maxRatio === 2) {\r\n            //we are mixed, ratio = 0 is the one we can't use\r\n            if (ratio[value] === 0) return;\r\n            this.resynth = value;\r\n        }\r\n        refreshResynth();\r\n    }\r\n}\r\n\r\nconst $synthBuilding = $(\"#synthBuilding\");\r\nconst $synthSlot = $(\"#synthSlot\");\r\nconst $synthList = $(\"#synthList\");\r\nconst $synthRewardCard = $(\"#synthRewardCard\");\r\nconst $synthRewardAmt = $(\"#synthRewardAmt\")\r\nconst $synthReward = $(\"#synthReward\");\r\n\r\n\r\nfunction initiateSynthBldg() {\r\n    $synthBuilding.show();\r\n    refreshSynthStage();\r\n    refreshSynthInventory();\r\n    refreshSynthButtons();\r\n    if (SynthManager.setting === synthToggle.DESYNTH) refreshDesynth();\r\n    if (SynthManager.setting === synthToggle.RESYNTH) refreshResynth();\r\n}\r\n\r\nfunction refreshSynthInventory() {\r\n    $synthList.empty();\r\n        $(\"<div/>\").addClass(\"possibleSynthHead synthHeading\").html(\"Available Items to Synthesize\").appendTo($synthList);\r\n        const d1 = $(\"<div/>\").addClass('possibleSynthHolder').appendTo($synthList);\r\n    if (SynthManager.possibleSynth().length === 0) $(\"<div/>\").addClass(\"synthBlank\").html(\"No Items to Synthesize\").appendTo(d1)\r\n    SynthManager.possibleSynth().forEach(container => {\r\n        createSynthCard(container,false).appendTo(d1);\r\n    });\r\n};\r\n\r\nfunction refreshSynthStage() {\r\n    $synthSlot.empty();\r\n    if (SynthManager.slot === null) {\r\n        $(\"<div/>\").addClass(\"synthSlotName itemName slotEmpty\").html(\"Empty\").appendTo($synthSlot);\r\n        return;\r\n    }\r\n    createSynthStageCard(SynthManager.slot).appendTo($synthSlot);\r\n}\r\n\r\nconst $desynthRewards = $(\"#desynthRewards\");\r\nconst $resynthCost = $(\"#resynthCost\");\r\n\r\nconst $resynthMaterial = $(\"#resynthMaterial\");\r\nconst $resynthMaterials = $(\"#resynthMaterials\");\r\n\r\nfunction refreshDesynth() {\r\n    $desynthRewards.show();\r\n    $resynthCost.hide();\r\n    $(\".synthPowerSetting\").removeClass(\"synthPowerEnabled\");\r\n    $(\"#synthPowerDesynthesis\").addClass(\"synthPowerEnabled\");\r\n    $synthRewardCard.empty();\r\n    $synthRewardAmt.empty();\r\n    if (SynthManager.slot === null) {\r\n        $desynthRewards.hide();\r\n        return;\r\n    }\r\n    $desynthRewards.show();\r\n    const mod = SynthManager.state === \"complete\";\r\n    const reward = SynthManager.desynthRewards(mod);\r\n    $(\"<div/>\").addClass(\"synthMaterialPic\").html(ResourceManager.idToMaterial(reward.id).img).appendTo($synthRewardCard);\r\n    $(\"<div/>\").addClass(\"synthMaterialAmt\").html(reward.amt).appendTo($synthRewardAmt);\r\n    $synthReward.addClass(\"tooltip\").attr({\"data-tooltip\":\"material_desc\",\"data-tooltip-value\":reward.id});\r\n    synthBarText(\"Desynthesize\");\r\n    refreshSynthStage();\r\n}\r\n\r\nfunction refreshResynth() {\r\n    $desynthRewards.hide();\r\n    $(\".synthPowerSetting\").removeClass(\"synthPowerEnabled\");\r\n    $(\"#synthPowerResynthesis\").addClass(\"synthPowerEnabled\");\r\n    if (SynthManager.state === \"empty\") return $resynthCost.hide();\r\n    $resynthCost.show();\r\n    const idAmts = SynthManager.resynthCosts();\r\n    $resynthMaterials.empty();\r\n    const mats = [\"M700\",\"M701\",\"M702\"];\r\n    mats.forEach(mat => {\r\n        if (idAmts[mat] === 0) return;\r\n        $(\"<div/>\").addClass(\"resynthMaterial\").data(\"matid\",mat).html(`${ResourceManager.idToMaterial(mat).img} ${idAmts[mat]}`).appendTo($resynthMaterials);\r\n    });\r\n    if (SynthManager.state === \"staged\") {\r\n        synthBarText(\"Start Resynthesis\");\r\n    }\r\n    if (SynthManager.state === \"resynthing\") {\r\n        $(\"#synthRemove\").hide();\r\n        synthBarText(\"Resynthing...\");\r\n    }\r\n    if (SynthManager.state === \"complete\") {\r\n        $(\"#synthRemove\").hide();\r\n        synthBarText(\"Collect\");\r\n    }\r\n    refreshSynthStage()\r\n}\r\n\r\nfunction refreshSynthButtons() {\r\n    if (SynthManager.lvl >= 2) $synthPowerResynthesis.html(\"Resynthesis\");\r\n}\r\n\r\nfunction createSynthBar(text) {\r\n    const synthPercent = SynthManager.time/SynthManager.cookTime;\r\n    const synthWidth = (synthPercent*100).toFixed(1)+\"%\";\r\n    const d1 = $(\"<div/>\").addClass(\"synthBarDiv\").attr(\"id\",\"synthBarDiv\");\r\n    const d1a = $(\"<div/>\").addClass(\"synthBar\").attr(\"id\",\"synthBar\");\r\n    const s1 = $(\"<span/>\").addClass(\"synthBarFill\").attr(\"id\",\"synthFill\").html(text).css('width', synthWidth);\r\n    return d1.append(d1a,s1);\r\n}\r\n\r\nfunction refreshSynthBar(text) {\r\n    const synthPercent = SynthManager.time/SynthManager.cookTime;\r\n    const synthWidth = (synthPercent*100).toFixed(1)+\"%\";\r\n    $(\"#synthFill\").html(text).css('width', synthWidth);\r\n}\r\n\r\nfunction synthBarText(text) {\r\n    $(\"#synthFill\").html(text);\r\n}\r\n    \r\n//click synth on item in inventory\r\n$(document).on('click', '.synthButton', (e) => {\r\n    e.preventDefault();\r\n    const id = parseInt($(e.currentTarget).data(\"containerID\"));\r\n    SynthManager.addSynth(id);    \r\n});\r\n\r\n//click deynth close button\r\n$(document).on('click', '#synthRemove', (e) => {\r\n    e.preventDefault();\r\n    SynthManager.removeSynth();\r\n})\r\n\r\n//click synth start button\r\n$(document).on('click', '#synthBarDiv', (e) => {\r\n    e.preventDefault();\r\n    SynthManager.stageButton();\r\n});\r\n\r\n//change to Desynthesis\r\n$(document).on('click', '#synthPowerDesynthesis', (e) => {\r\n    e.preventDefault();\r\n    SynthManager.toggleStatus(synthToggle.DESYNTH);\r\n})\r\n\r\n//change to Resynthesis\r\n$(document).on('click', '#synthPowerResynthesis', (e) => {\r\n    e.preventDefault();\r\n    SynthManager.toggleStatus(synthToggle.RESYNTH);\r\n})\r\n\r\n//click on a material to add to resynth collection\r\n$(document).on('click', '.resynthMaterial', (e) => {\r\n    e.preventDefault();\r\n    $(\".resynthMaterial\").removeClass(\"selected\");\r\n    $(e.currentTarget).addClass(\"selected\");\r\n    const type = $(e.currentTarget).data(\"matid\");\r\n    if (SynthManager.state === \"staged\") SynthManager.fillResynthSlot(type);\r\n});\r\n\r\nfunction createSynthCard(container) {\r\n    const itemdiv = $(\"<div/>\").addClass(\"inventoryItem\").addClass(\"R\"+container.rarity);\r\n    const itemName = $(\"<div/>\").addClass(\"inventoryItemName itemName\").attr({\"id\": container.id, \"r\": container.rarity}).html(container.picName());\r\n    const itemRarity = $(\"<div/>\").addClass(`inventoryItemRarity RT${container.rarity} tooltip`).attr({\"data-tooltip\": `rarity_${rarities[container.rarity].toLowerCase()}`}).html(miscIcons.rarity);\r\n    const itemLevel = $(\"<div/>\").addClass(\"inventoryItemLevel tooltip\").attr({\"data-tooltip\": \"item_level\"}).html(container.itemLevel());\r\n    const itemProps = $(\"<div/>\").addClass(\"inventoryProps\");\r\n    for (const [stat, val] of Object.entries(container.itemStat(0))) {\r\n        if (val === 0) continue;\r\n        $(\"<div/>\").addClass(\"invPropStat tooltip\").attr(\"data-tooltip\", stat).html(`${miscIcons[stat]} <span class=\"statValue\">${val}</span>`).appendTo(itemProps);\r\n    };\r\n    const synthButton = $(\"<div/>\").addClass(\"synthButton\").data(\"containerID\",container.containerID).html(\"Stage Item\");\r\n    return itemdiv.append(itemName,itemRarity,itemLevel,itemProps,synthButton);\r\n}\r\n\r\nfunction createSynthStageCard(container) {\r\n    const itemdiv = $(\"<div/>\").addClass(\"inventoryItem\").addClass(\"R\"+container.rarity);\r\n    const itemName = $(\"<div/>\").addClass(\"inventoryItemName itemName\").attr({\"id\": container.id, \"r\": container.rarity}).html(container.picName());\r\n    const stageRemove = $('<div/>').attr(\"id\",\"synthRemove\").html(`<i class=\"fas fa-times\"></i>`);\r\n    const itemLevel = $(\"<div/>\").addClass(\"inventoryItemLevel tooltip\").attr({\"data-tooltip\": \"item_level\"}).html(container.itemLevel());\r\n    const itemProps = $(\"<div/>\").addClass(\"inventoryProps\");\r\n    const synthStatProps = SynthManager.setting === synthToggle.RESYNTH ? SynthManager.resynthChange() : [0,0,0];\r\n    for (const [stat, val] of Object.entries(container.itemStat(0, synthStatProps[0], synthStatProps[1], synthStatProps[2]))) {\r\n        if (val === 0) continue;\r\n        $(\"<div/>\").addClass(\"invPropStat tooltip\").attr(\"data-tooltip\", stat).html(`${miscIcons[stat]} <span class=\"statValue\">${val}</span>`).appendTo(itemProps);\r\n    };\r\n    itemdiv.append(itemName,stageRemove,itemLevel,itemProps)\r\n    if (SynthManager.state === \"staged\" && SynthManager.resynth !== null) {\r\n        createSynthBar(\"Resynthesize\").appendTo(itemdiv);\r\n    }\r\n    if (SynthManager.state === \"staged\" && SynthManager.resynth === null) {\r\n        createSynthBar(\"Select Material\").appendTo(itemdiv);\r\n    }\r\n    if (SynthManager.state === \"complete\") {\r\n        createSynthBar(\"Collect\").appendTo(itemdiv);\r\n        stageRemove.hide();\r\n    }\r\n    return itemdiv;\r\n};"],"file":"synth.js"}