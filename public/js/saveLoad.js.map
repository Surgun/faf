{"version":3,"sources":["../../src/js/saveLoad.js"],"names":["stopSave","ClearSave","localStorage","removeItem","location","replace","ExportSave","saveFile","createSaveExport","$","val","ga","ImportSaveButton","unpako","atob","JSON","parse","pako","ungzip","to","setItem","forceSaveChange","string","saveTime","saveGame","ms","createSave","forceSave","actionSlotManager","DungeonManager","HeroManager","Inventory","recipeList","ResourceManager","WorkerManager","achievementStats","SynthManager","FusionManager","BankManager","bloopSmith","FortuneManager","TownManager","GuildSeedManager","GuildManager","Shop","TinkerManager","MonsterHall","Date","now","stringify","save","pakoSave","gzip","btoa","loadGame","getItem","saveUpdate","loadSave","v","events","filter","e","id","oldEvents","forEach","hero","ap","hp","idToHero","maxHP","inDungeon","slots","guilds","locked","r","owned","map","g","gid","repReq","recipes","guildUnlock","includes","lowest","Math","max","guildSave","rep","lvl","push","bankUnlock","bankStatus","BuildingState","built","bankSee","seen","hidden","fuseUnlock","fuseStatus","fuseSee","smithUnlock","smithStatus","smithSee","fortuneUnlock","fortuneStatus","fortuneSee","purchased","find","w","h","maxSlots","guild","order","undefined","refreshAllOrders","refreshAllSales","refreshguildprogress","recipeExchange","recipe","hasOwnProperty","i","smithSlot","heroTable","slot1","slot5","slice","slot6","gainWorker","locked2","slot","uniqueID","rarity","maxGuildLevel","alp","perks","p","matConversion","material","newMat","m","newMatProp","amt","event","reward","mat","goodReq","greatReq","epicReq","craftCount","mastered","min","commands","dT002","dT003","dT004","tinkerStatus","mat1","mat2","mat3","bossesBeat","length","kills","lineUpgrades","materialSave","dungeonBoss","bossID","buildings","SynthStatus","Set","slot7","sharp","container","item","idToItem","type","document","on","preventDefault","setDialogClose","$temp","append","select","execCommand","remove","html","setTimeout","empty","downloadSave","b","Blob","saveAs","unPackSave","file"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nlet stopSave = false;\r\n\r\n\r\nfunction ClearSave() {\r\n    localStorage.removeItem(\"ffgs1\");\r\n    location.replace('/');\r\n}\r\n\r\nfunction ExportSave() {\r\n    const saveFile = createSaveExport();\r\n    $(\"#exportSaveText\").val(saveFile);\r\n    ga('send', 'event', 'Save', 'export', 'export');\r\n}\r\n\r\nfunction ImportSaveButton() {\r\n    stopSave = true;\r\n    const unpako = atob($('#importSaveText').val());\r\n    const saveFile = JSON.parse(pako.ungzip(unpako,{ to: 'string' }));\r\n    localStorage.setItem('ffgs1', saveFile);\r\n    location.replace('/');\r\n}\r\n\r\nfunction forceSaveChange(string) {\r\n    localStorage.setItem('ffgs1', string);\r\n    location.replace('/');\r\n}\r\n\r\nlet saveTime = 0;\r\n\r\nfunction saveGame(ms) {\r\n    saveTime += ms;\r\n    if (saveTime < 5000) return;\r\n    saveTime = 0;\r\n    if (stopSave) return;\r\n    localStorage.setItem('ffgs1', createSave());\r\n    ga('send', 'event', 'Save', 'savegame', 'savegame');\r\n}\r\n\r\nfunction forceSave() {\r\n    localStorage.setItem('ffgs1', createSave());\r\n}\r\n\r\nfunction createSave() {\r\n    const saveFile = {}\r\n    saveFile[\"v\"] = \"0334\"\r\n    saveFile[\"as\"] = actionSlotManager.createSave();\r\n    saveFile[\"d\"] = DungeonManager.createSave();\r\n    saveFile[\"h\"] = HeroManager.createSave();\r\n    saveFile[\"i\"] = Inventory.createSave();\r\n    saveFile[\"r\"] = recipeList.createSave();\r\n    saveFile[\"rs\"] = ResourceManager.createSave();\r\n    saveFile[\"w\"] = WorkerManager.createSave();\r\n    saveFile[\"ac\"] = achievementStats.createSave();\r\n    saveFile[\"ds\"] = SynthManager.createSave();\r\n    saveFile[\"fb\"] = FusionManager.createSave();\r\n    saveFile[\"bb\"] = BankManager.createSave();\r\n    saveFile[\"bs\"] = bloopSmith.createSave();\r\n    saveFile[\"fo\"] = FortuneManager.createSave();\r\n    saveFile[\"tm\"] = TownManager.createSave();\r\n    saveFile[\"gsm\"] = GuildSeedManager.createSave();\r\n    saveFile[\"g\"] = GuildManager.createSave();\r\n    saveFile[\"al\"] = Shop.createSave();\r\n    saveFile[\"t\"] = TinkerManager.createSave();\r\n    saveFile[\"mh\"] = MonsterHall.createSave();\r\n    saveFile[\"saveTime\"] = Date.now();\r\n    return JSON.stringify(saveFile);\r\n}\r\n\r\nfunction createSaveExport() {\r\n    const save = createSave();\r\n    const pakoSave = pako.gzip(JSON.stringify(save),{ to: 'string' });\r\n    return btoa(pakoSave);\r\n}\r\n\r\nfunction loadGame() {\r\n    //populate itemCount with blueprints as a base\r\n    let loadGame = JSON.parse(localStorage.getItem(\"ffgs1\"));\r\n    if (loadGame === null) return false;\r\n    //aka there IS a file\r\n    loadGame = saveUpdate(loadGame);\r\n    if (typeof loadGame[\"as\"] !== \"undefined\") actionSlotManager.loadSave(loadGame[\"as\"]);\r\n    if (typeof loadGame[\"d\"] !== \"undefined\") DungeonManager.loadSave(loadGame[\"d\"]);\r\n    if (typeof loadGame[\"h\"] !== \"undefined\") HeroManager.loadSave(loadGame[\"h\"]);\r\n    if (typeof loadGame[\"i\"] !== \"undefined\") Inventory.loadSave(loadGame[\"i\"]);\r\n    if (typeof loadGame[\"r\"] !== \"undefined\") recipeList.loadSave(loadGame[\"r\"]);\r\n    if (typeof loadGame[\"rs\"] !== \"undefined\") ResourceManager.loadSave(loadGame[\"rs\"]);\r\n    if (typeof loadGame[\"w\"] !== \"undefined\") WorkerManager.loadSave(loadGame[\"w\"]);\r\n    if (typeof loadGame[\"ac\"] !== \"undefined\") achievementStats.loadSave(loadGame[\"ac\"]);\r\n    if (typeof loadGame[\"ds\"] !== \"undefined\") SynthManager.loadSave(loadGame[\"ds\"]);\r\n    if (typeof loadGame[\"fb\"] !== \"undefined\") FusionManager.loadSave(loadGame[\"fb\"]);\r\n    if (typeof loadGame[\"bb\"] !== \"undefined\") BankManager.loadSave(loadGame[\"bb\"]);\r\n    if (typeof loadGame[\"bs\"] !== \"undefined\") bloopSmith.loadSave(loadGame[\"bs\"]);\r\n    if (typeof loadGame[\"fo\"] !== \"undefined\") FortuneManager.loadSave(loadGame[\"fo\"]);\r\n    if (typeof loadGame[\"tm\"] !== \"undefined\") TownManager.loadSave(loadGame[\"tm\"]);\r\n    if (typeof loadGame[\"gsm\"] !== \"undefined\") GuildSeedManager.loadSave(loadGame[\"gsm\"]);\r\n    if (typeof loadGame[\"g\"] !== \"undefined\") GuildManager.loadSave(loadGame[\"g\"]);\r\n    if (typeof loadGame[\"al\"] !== \"undefined\") Shop.loadSave(loadGame[\"al\"]);\r\n    if (typeof loadGame[\"t\"] !== \"undefined\") TinkerManager.loadSave(loadGame[\"t\"]);\r\n    if (typeof loadGame[\"mh\"] !== \"undefined\") MonsterHall.loadSave(loadGame[\"mh\"]);\r\n    return true;\r\n}\r\n\r\nfunction saveUpdate(loadGame) {\r\n    if (loadGame.v === \"0202\") {\r\n        loadGame.v = \"03\";\r\n        //remove E008 because we killed it (it was auto craft sac)\r\n        loadGame[\"e\"].events = loadGame[\"e\"].events.filter(e => e.id !== \"E008\");\r\n        loadGame[\"e\"].oldEvents = loadGame[\"e\"].oldEvents.filter(e => e.id !== \"E008\");\r\n\r\n        //deslot all dungeons too because the format changed\r\n        //and reset all heroes\r\n        delete loadGame[\"d\"];\r\n        loadGame[\"h\"].forEach(hero => {\r\n            hero.ap = 0;\r\n            hero.hp = HeroManager.idToHero(hero.id).maxHP();\r\n            hero.inDungeon = false;\r\n        });\r\n\r\n        //deslot crafts just in case they had building  mats crafting\r\n        loadGame[\"as\"].slots = [];\r\n\r\n        //worker system and recipe unlock removed, replaced with guild system\r\n        //because of time involved with guilds, set level based off current \"clear\" to make it easier on player\r\n        loadGame[\"g\"] = {};\r\n        loadGame[\"g\"].guilds = [];\r\n        const locked = loadGame[\"r\"].filter(r => r.owned).map(r => r.id);\r\n        GuildManager.guilds.map(g => g.id).forEach(gid => {\r\n            const repReq = recipeList.recipes.filter(r => r.guildUnlock === gid && locked.includes(r.id)).map(r=>r.repReq);\r\n            const lowest = Math.max(...repReq);\r\n            const guildSave  = {}\r\n            guildSave.id = gid;\r\n            guildSave.rep = 0;\r\n            guildSave.lvl = lowest;\r\n            loadGame[\"g\"].guilds.push(guildSave)\r\n        });        \r\n\r\n        //update for fortune building changes\r\n        if (loadGame[\"tm\"].bankUnlock) loadGame[\"tm\"].bankStatus = BuildingState.built;\r\n        else if (loadGame[\"tm\"].bankSee) loadGame[\"tm\"].bankStatus = BuildingState.seen;\r\n        else loadGame[\"tm\"].bankStatus = BuildingState.hidden;\r\n\r\n        if (loadGame[\"tm\"].fuseUnlock) loadGame[\"tm\"].fuseStatus = BuildingState.built;\r\n        else if (loadGame[\"tm\"].fuseSee) loadGame[\"tm\"].fuseStatus = BuildingState.seen;\r\n        else loadGame[\"tm\"].fuseStatus = BuildingState.hidden;\r\n\r\n        if (loadGame[\"tm\"].smithUnlock) loadGame[\"tm\"].smithStatus = BuildingState.built;\r\n        else if (loadGame[\"tm\"].smithSee) loadGame[\"tm\"].smithStatus = BuildingState.seen;\r\n        else loadGame[\"tm\"].smithStatus = BuildingState.hidden;\r\n\r\n        if (loadGame[\"tm\"].fortuneUnlock) loadGame[\"tm\"].fortuneStatus = BuildingState.built;\r\n        else if (loadGame[\"tm\"].fortuneSee) loadGame[\"tm\"].fortuneStatus = BuildingState.seen;\r\n        else loadGame[\"tm\"].fortuneStatus = BuildingState.hidden;\r\n\r\n        //setup action league import and unlock perks already owned\r\n        loadGame[\"al\"] = {};\r\n        loadGame[\"al\"].purchased = [];\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W002\").owned) loadGame[\"al\"].purchased.push(\"AL1002\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W003\").owned) loadGame[\"al\"].purchased.push(\"AL1003\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W004\").owned) loadGame[\"al\"].purchased.push(\"AL1004\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W005\").owned) loadGame[\"al\"].purchased.push(\"AL1005\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W006\").owned) loadGame[\"al\"].purchased.push(\"AL1006\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W007\").owned) loadGame[\"al\"].purchased.push(\"AL1007\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W008\").owned) loadGame[\"al\"].purchased.push(\"AL1008\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W009\").owned) loadGame[\"al\"].purchased.push(\"AL1009\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W010\").owned) loadGame[\"al\"].purchased.push(\"AL1010\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W101\").owned) loadGame[\"al\"].purchased.push(\"AL1011\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W102\").owned) loadGame[\"al\"].purchased.push(\"AL1012\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W103\").owned) loadGame[\"al\"].purchased.push(\"AL1013\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W104\").owned) loadGame[\"al\"].purchased.push(\"AL1014\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W105\").owned) loadGame[\"al\"].purchased.push(\"AL1015\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W106\").owned) loadGame[\"al\"].purchased.push(\"AL1016\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W107\").owned) loadGame[\"al\"].purchased.push(\"AL1017\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W108\").owned) loadGame[\"al\"].purchased.push(\"AL1018\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W109\").owned) loadGame[\"al\"].purchased.push(\"AL1019\");\r\n        if (loadGame[\"w\"].find(w=>w.id === \"W110\").owned) loadGame[\"al\"].purchased.push(\"AL1020\");\r\n\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H001\").owned) loadGame[\"al\"].purchased.push(\"AL2001\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H002\").owned) loadGame[\"al\"].purchased.push(\"AL2002\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H003\").owned) loadGame[\"al\"].purchased.push(\"AL2003\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H004\").owned) loadGame[\"al\"].purchased.push(\"AL2004\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H101\").owned) loadGame[\"al\"].purchased.push(\"AL2101\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H102\").owned) loadGame[\"al\"].purchased.push(\"AL2102\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H103\").owned) loadGame[\"al\"].purchased.push(\"AL2103\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H104\").owned) loadGame[\"al\"].purchased.push(\"AL2104\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H201\").owned) loadGame[\"al\"].purchased.push(\"AL2201\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H202\").owned) loadGame[\"al\"].purchased.push(\"AL2202\");\r\n        if (loadGame[\"h\"].find(h=>h.id === \"H204\").owned) loadGame[\"al\"].purchased.push(\"AL2204\");\r\n\r\n        if (loadGame[\"as\"].maxSlots >= 2) loadGame[\"al\"].purchased.push(\"AL4001\");\r\n        if (loadGame[\"as\"].maxSlots >= 3) loadGame[\"al\"].purchased.push(\"AL4002\");\r\n        if (loadGame[\"as\"].maxSlots >= 4) loadGame[\"al\"].purchased.push(\"AL4003\");\r\n        if (loadGame[\"as\"].maxSlots >= 5) loadGame[\"al\"].purchased.push(\"AL4004\");\r\n\r\n        if (loadGame[\"tm\"].bankStatus !== BuildingState.hidden) loadGame[\"al\"].purchased.push(\"AL4101\");\r\n        if (loadGame[\"tm\"].fuseStatus !== BuildingState.hidden) loadGame[\"al\"].purchased.push(\"AL4102\");\r\n        if (loadGame[\"tm\"].smithStatus !== BuildingState.hidden) loadGame[\"al\"].purchased.push(\"AL4103\");\r\n        if (loadGame[\"tm\"].fortuneStatus !== BuildingState.hidden) loadGame[\"al\"].purchased.push(\"AL4104\");\r\n    }\r\n    if (loadGame.v === \"03\") {\r\n        loadGame.v = \"0308\";\r\n        loadGame[\"g\"].guilds.forEach(guild => {\r\n            if (guild.rep >= 3) {\r\n                guild.rep = 0;\r\n                guild.lvl += 1;\r\n                guild.order = undefined;\r\n            }\r\n        })\r\n        refreshAllOrders();\r\n        refreshAllSales();\r\n        GuildManager.guilds.forEach(g => refreshguildprogress(g));\r\n    }\r\n    if (loadGame.v === \"0308\") {\r\n        loadGame.v = \"0310\";\r\n        //this is the recipes and what they got changed to\r\n        const recipeExchange = {\r\n            \"R0101\":\"R12001\",\r\n            \"R0102\":\"R12002\",\r\n            \"R0103\":\"R12003\",\r\n            \"R0104\":\"R12004\",\r\n            \"R0105\":\"R12005\",\r\n            \"R0106\":\"R12006\",\r\n            \"R0107\":\"R12007\",\r\n            \"R0108\":\"R12008\",\r\n            \"R0109\":\"R12009\",\r\n            \"R0110\":\"R12010\",\r\n            \"R0201\":\"R12001\",\r\n            \"R0202\":\"R12002\",\r\n            \"R0203\":\"R12003\",\r\n            \"R0204\":\"R12004\",\r\n            \"R0205\":\"R12005\",\r\n            \"R0206\":\"R12006\",\r\n            \"R0207\":\"R12007\",\r\n            \"R0208\":\"R12008\",\r\n            \"R0209\":\"R12009\",\r\n            \"R0210\":\"R12010\",\r\n            \"R0301\":\"R12001\",\r\n            \"R0302\":\"R12002\",\r\n            \"R0303\":\"R12003\",\r\n            \"R0304\":\"R12004\",\r\n            \"R0305\":\"R12005\",\r\n            \"R0306\":\"R12006\",\r\n            \"R0307\":\"R12007\",\r\n            \"R0308\":\"R12008\",\r\n            \"R0309\":\"R12009\",\r\n            \"R0310\":\"R12010\",\r\n            \"R0401\":\"R11001\",\r\n            \"R0402\":\"R11002\",\r\n            \"R0403\":\"R11003\",\r\n            \"R0404\":\"R11004\",\r\n            \"R0405\":\"R11005\",\r\n            \"R0406\":\"R11006\",\r\n            \"R0407\":\"R11007\",\r\n            \"R0408\":\"R11008\",\r\n            \"R0409\":\"R11009\",\r\n            \"R0410\":\"R11010\",\r\n            \"R0501\":\"R11001\",\r\n            \"R0502\":\"R11002\",\r\n            \"R0503\":\"R11003\",\r\n            \"R0504\":\"R11004\",\r\n            \"R0505\":\"R11005\",\r\n            \"R0506\":\"R11006\",\r\n            \"R0507\":\"R11007\",\r\n            \"R0508\":\"R11008\",\r\n            \"R0509\":\"R11009\",\r\n            \"R0510\":\"R11010\",\r\n            \"R0601\":\"R11001\",\r\n            \"R0602\":\"R11002\",\r\n            \"R0603\":\"R11003\",\r\n            \"R0604\":\"R11004\",\r\n            \"R0605\":\"R11005\",\r\n            \"R0606\":\"R11006\",\r\n            \"R0607\":\"R11007\",\r\n            \"R0608\":\"R11008\",\r\n            \"R0609\":\"R11009\",\r\n            \"R0610\":\"R11010\",\r\n            \"R0701\":\"R13001\",\r\n            \"R0702\":\"R13002\",\r\n            \"R0703\":\"R13003\",\r\n            \"R0704\":\"R13004\",\r\n            \"R0705\":\"R13005\",\r\n            \"R0706\":\"R13006\",\r\n            \"R0707\":\"R13007\",\r\n            \"R0708\":\"R13008\",\r\n            \"R0709\":\"R13009\",\r\n            \"R0710\":\"R13010\",\r\n            \"R0801\":\"R13001\",\r\n            \"R0802\":\"R13002\",\r\n            \"R0803\":\"R13003\",\r\n            \"R0804\":\"R13004\",\r\n            \"R0805\":\"R13005\",\r\n            \"R0806\":\"R13006\",\r\n            \"R0807\":\"R13007\",\r\n            \"R0808\":\"R13008\",\r\n            \"R0809\":\"R13009\",\r\n            \"R0810\":\"R13010\",\r\n            \"R0901\":\"R13001\",\r\n            \"R0902\":\"R13002\",\r\n            \"R0903\":\"R13003\",\r\n            \"R0904\":\"R13004\",\r\n            \"R0905\":\"R13005\",\r\n            \"R0906\":\"R13006\",\r\n            \"R0907\":\"R13007\",\r\n            \"R0908\":\"R13008\",\r\n            \"R0909\":\"R13009\",\r\n            \"R0910\":\"R13010\",\r\n            \"R1001\":\"R12001\",\r\n            \"R1002\":\"R12002\",\r\n            \"R1003\":\"R12003\",\r\n            \"R1004\":\"R12004\",\r\n            \"R1005\":\"R12005\",\r\n            \"R1006\":\"R12006\",\r\n            \"R1007\":\"R12007\",\r\n            \"R1008\":\"R12008\",\r\n            \"R1009\":\"R12009\",\r\n            \"R1010\":\"R12010\",\r\n            \"R5201\":\"R5501\",\r\n            \"R5202\":\"R5502\",\r\n            \"R5203\":\"R5503\",\r\n            \"R5204\":\"R5504\",\r\n            \"R5205\":\"R5505\",\r\n            \"R5206\":\"R5506\",\r\n            \"R5207\":\"R5507\",\r\n            \"R5208\":\"R5508\",\r\n            \"R5209\":\"R5509\",\r\n            \"R5210\":\"R5510\",\r\n            \"R5601\":\"R5301\",\r\n            \"R5602\":\"R5302\",\r\n            \"R5603\":\"R5303\",\r\n            \"R5604\":\"R5304\",\r\n            \"R5605\":\"R5305\",\r\n            \"R5606\":\"R5306\",\r\n            \"R5607\":\"R5307\",\r\n            \"R5608\":\"R5308\",\r\n            \"R5609\":\"R5309\",\r\n            \"R5610\":\"R5310\",\r\n            \"R6101\":\"R6501\",\r\n            \"R6102\":\"R6502\",\r\n            \"R6103\":\"R6503\",\r\n            \"R6104\":\"R6504\",\r\n            \"R6105\":\"R6505\",\r\n            \"R6106\":\"R6506\",\r\n            \"R6107\":\"R6507\",\r\n            \"R6108\":\"R6508\",\r\n            \"R6109\":\"R6509\",\r\n            \"R6110\":\"R6510\",\r\n            \"R6401\":\"R6301\",\r\n            \"R6402\":\"R6302\",\r\n            \"R6403\":\"R6303\",\r\n            \"R6404\":\"R6304\",\r\n            \"R6405\":\"R6305\",\r\n            \"R6406\":\"R6306\",\r\n            \"R6407\":\"R6307\",\r\n            \"R6408\":\"R6308\",\r\n            \"R6409\":\"R6309\",\r\n            \"R6410\":\"R6310\",\r\n            \"R6601\":\"R6201\",\r\n            \"R6602\":\"R6202\",\r\n            \"R6603\":\"R6203\",\r\n            \"R6604\":\"R6204\",\r\n            \"R6605\":\"R6205\",\r\n            \"R6606\":\"R6206\",\r\n            \"R6607\":\"R6207\",\r\n            \"R6608\":\"R6208\",\r\n            \"R6609\":\"R6209\",\r\n            \"R6610\":\"R6210\",\r\n        }            \r\n        //cycle through recipes and \"own\" the equivalents (repeats are okay because of how recipe load works)\r\n        loadGame[\"r\"].forEach(recipe => {\r\n            if (recipeExchange.hasOwnProperty(recipe.id)) recipe.id = recipeExchange[recipe.id];\r\n        });\r\n        //cycle through inventory and swap the item types to this list\r\n        loadGame[\"i\"].forEach(i => {\r\n            if (i !== null && recipeExchange.hasOwnProperty(i.id)) i.id = recipeExchange[i.id];\r\n        });\r\n        //cycle through bank too\r\n        loadGame[\"bb\"].slots.forEach(i => {\r\n            if (i !== null && recipeExchange.hasOwnProperty(i.id)) i.id = recipeExchange[i.id];\r\n        });\r\n\r\n        //blacksmith fix\r\n        if (loadGame[\"bs\"].smithSlot !== null && recipeExchange[loadGame[\"bs\"].smithSlot.id] !== undefined) loadGame[\"bs\"].smithSlot.id = recipeExchange[loadGame[\"bs\"].smithSlot.id];        \r\n\r\n        //cycle through heroes and their gear\r\n        const heroTable = {\r\n            \"H001\":[\"R51\",\"R65\"],\r\n            \"H002\":[\"R51\",\"R65\"],\r\n            \"H003\":[\"R51\",\"R65\"],\r\n            \"H004\":[\"R51\",\"R65\"],\r\n            \"H101\":[\"R55\",\"R62\"],\r\n            \"H102\":[\"R55\",\"R62\"],\r\n            \"H103\":[\"R55\",\"R62\"],\r\n            \"H104\":[\"R55\",\"R62\"],\r\n            \"H201\":[\"R53\",\"R63\"],\r\n            \"H202\":[\"R53\",\"R63\"],\r\n            \"H203\":[\"R53\",\"R63\"],\r\n            \"H204\":[\"R53\",\"R63\"],\r\n        }\r\n        loadGame[\"h\"].forEach(hero => {\r\n            //slot 1 is weapon and we can just swap from recipe table\r\n            if (hero.slot1 !== null && recipeExchange.hasOwnProperty(hero.slot1.id)) hero.slot1.id = recipeExchange[hero.slot1.id];\r\n            //slot 5 and 6 is a PITA because a might hero might go from needing a potion to needing a belt. Fortunately we can\r\n            //just swap the first two letters to get the \"new\" one and leave the tier part... \r\n            if (hero.slot5 !== null) hero.slot5.id = heroTable[hero.id][0] + hero.slot5.id.slice(-2);\r\n            if (hero.slot6 !== null) hero.slot6.id = heroTable[hero.id][1] + hero.slot6.id.slice(-2);\r\n        });\r\n        //clear action slots too because worker allocation is different\r\n        loadGame[\"as\"].slots = [];\r\n        //delete workers because why the fuck not?\r\n        delete loadGame[\"w\"];\r\n        WorkerManager.gainWorker(\"WN201\");\r\n\r\n        //repopulate guild oredrs bc new items (and one less guild);\r\n        const locked2 = loadGame[\"r\"].filter(r => r.owned).map(r => r.id);\r\n        GuildManager.guilds.map(g => g.id).forEach(gid => {\r\n            const repReq = recipeList.recipes.filter(r => r.guildUnlock === gid && locked2.includes(r.id)).map(r=>r.repReq);\r\n            const lowest = Math.max(...repReq);\r\n            loadGame[\"g\"].guilds.find(g=>g.id === gid).lvl = lowest;\r\n        });\r\n        delete loadGame[\"g\"].guilds[0].order;\r\n        delete loadGame[\"g\"].guilds[1].order;\r\n        delete loadGame[\"g\"].guilds[2].order;\r\n        delete loadGame[\"g\"].guilds[3].order;\r\n        loadGame[\"g\"].guilds = loadGame[\"g\"].guilds.filter(g=>g.id !== \"G005\");\r\n        \r\n        //convert fusion slots\r\n        loadGame[\"fb\"].slots.forEach(slot => {\r\n            if (recipeExchange[slot.id] !== undefined) slot.id = recipeExchange[slot.id];\r\n            slot.uniqueID = slot.id+\"_\"+slot.rarity+\"_0\";\r\n        });\r\n\r\n        //buy max level perks you should own\r\n        loadGame[\"g\"].maxGuildLevel = 0;\r\n    }\r\n    if (loadGame.v === \"0310\") {\r\n        loadGame.v = \"0312\";\r\n        const alp = Shop.perks.map(p => p.id)\r\n        loadGame[\"al\"].purchased = loadGame[\"al\"].purchased.filter(p => alp.includes(p));\r\n    }\r\n    const matConversion = {\r\n        \"M401\":\"M101\",\r\n        \"M402\":\"M102\",\r\n        \"M403\":\"M103\",\r\n        \"M404\":\"M104\",\r\n        \"M405\":\"M105\",\r\n        \"M406\":\"M106\",\r\n        \"M407\":\"M107\",\r\n        \"M408\":\"M108\",\r\n        \"M409\":\"M109\",\r\n        \"M410\":\"M110\",\r\n        \"M501\":\"M201\",\r\n        \"M502\":\"M202\",\r\n        \"M503\":\"M203\",\r\n        \"M504\":\"M204\",\r\n        \"M505\":\"M205\",\r\n        \"M506\":\"M206\",\r\n        \"M507\":\"M207\",\r\n        \"M508\":\"M208\",\r\n        \"M509\":\"M209\",\r\n        \"M510\":\"M210\",\r\n        \"M601\":\"M301\",\r\n        \"M602\":\"M302\",\r\n        \"M603\":\"M303\",\r\n        \"M604\":\"M304\",\r\n        \"M605\":\"M305\",\r\n        \"M606\":\"M306\",\r\n        \"M607\":\"M307\",\r\n        \"M608\":\"M308\",\r\n        \"M609\":\"M309\",\r\n        \"M610\":\"M310\",\r\n    }\r\n    if (loadGame.v === \"0312\") {\r\n        loadGame.v = \"0316\";\r\n        loadGame[\"rs\"].forEach(material => {\r\n            if (matConversion[material.id] === undefined) return;\r\n            const newMat = matConversion[material.id];\r\n            if (loadGame[\"rs\"].find(m=>m.id === newMat) === undefined) {\r\n                const newMatProp = {};\r\n                newMatProp.id = newMat;\r\n                newMatProp.amt = loadGame[\"rs\"].find(m=>m.id === material.id).amt;\r\n                newMatProp.seen = true;\r\n                loadGame[\"rs\"].push(newMatProp);\r\n            }\r\n            else loadGame[\"rs\"].find(m=>m.id === newMat).amt += material.amt;\r\n        });\r\n        loadGame[\"rs\"] = loadGame[\"rs\"].filter(m => matConversion[m.id] === undefined);\r\n        loadGame[\"rs\"] = loadGame[\"rs\"].filter(m=>m.id !== \"M002\");\r\n    }\r\n    if (loadGame.v === \"0316\") {\r\n        loadGame.v = \"0317\";\r\n        //i forgot to loop through mail to remove rewards that have been removed\r\n        loadGame[\"e\"].events.forEach(event => {\r\n            if (event.reward === null) return;\r\n            event.reward.forEach(mat => {\r\n                if (matConversion[mat.id] === undefined) return;\r\n                mat.id = matConversion[mat.id];\r\n            });\r\n        });\r\n        //and finally fix fortune\r\n        if (matConversion[loadGame[\"fo\"].goodReq] !== undefined) loadGame[\"fo\"].goodReq = matConversion[loadGame[\"fo\"].goodReq];\r\n        if (matConversion[loadGame[\"fo\"].greatReq] !== undefined) loadGame[\"fo\"].greatReq = matConversion[loadGame[\"fo\"].greatReq];\r\n        if (matConversion[loadGame[\"fo\"].epicReq] !== undefined) loadGame[\"fo\"].epicReq = matConversion[loadGame[\"fo\"].epicReq];\r\n    }\r\n    if (loadGame.v === \"0317\") {\r\n        loadGame.v = \"032\";\r\n        delete loadGame[\"fo\"];\r\n        loadGame[\"r\"].forEach(recipe=> {\r\n            if (recipe.craftCount >= 100) recipe.mastered = true;\r\n            else recipe.mastered = false;\r\n        });\r\n        loadGame[\"rs\"].forEach(m => {if (m.id !== \"M001\") m.amt = Math.min(m.amt,1000)});\r\n    }\r\n    if (loadGame.v === \"032\") {\r\n        loadGame.v = \"0321\";\r\n        if (loadGame[\"t\"] === undefined) {\r\n            loadGame[\"t\"] = {\r\n                lvl : 1,\r\n                commands : [],\r\n                dT002 : 0,\r\n                dT003 : 0,\r\n                dT004 : 0,\r\n            }\r\n        }\r\n        loadGame[\"t\"].lvl = 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL4106\")) loadGame[\"tm\"].tinkerStatus = 0;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41061\")) loadGame[\"t\"].lvl += 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41062\")) loadGame[\"t\"].lvl += 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41063\")) loadGame[\"t\"].lvl += 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41064\")) loadGame[\"t\"].lvl += 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41065\")) loadGame[\"t\"].lvl += 1;\r\n    }\r\n    if (loadGame.v === \"0321\") {\r\n        loadGame.v = \"0322\";\r\n        loadGame[\"fo\"] = {\r\n            lvl : 1,\r\n            slots : [],\r\n        }\r\n        if (loadGame[\"al\"].purchased.includes(\"AL4106\")) loadGame[\"r\"].find(r=>r.id === \"R99610\").owned = true;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41041\")) loadGame[\"fo\"].lvl += 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41042\")) loadGame[\"fo\"].lvl += 1;\r\n    }\r\n    if (loadGame.v === \"0322\") {\r\n        loadGame.v = \"0329\";\r\n        const mat1 = loadGame[\"rs\"].find(m=>m.id === \"M800\");\r\n        const mat2 = loadGame[\"rs\"].find(m=>m.id === \"M801\");\r\n        const mat3 = loadGame[\"rs\"].find(m=>m.id === \"M802\");\r\n        mat3.amt += mat1.amt + mat2.amt;\r\n        mat3.amt = Math.min(1000,mat3.amt);\r\n    }\r\n    if (loadGame.v === \"0329\") {\r\n        loadGame.v = \"03210\";\r\n        loadGame[\"rs\"].find(m=>m.id === \"M800\").amt = 0;\r\n        loadGame[\"rs\"].find(m=>m.id === \"M801\").amt = 0;\r\n        const bossesBeat = loadGame[\"d\"].bossesBeat.length;\r\n        if (bossesBeat > 0) {\r\n            loadGame[\"mh\"] = {};\r\n            loadGame[\"mh\"].kills = [];\r\n            loadGame[\"mh\"].lvl = 1;\r\n            loadGame[\"mh\"].lineUpgrades = [];\r\n            const materialSave = {\r\n                \"id\" : \"M002\",\r\n                \"amt\" : bossesBeat,\r\n                \"seen\" : true,\r\n            }\r\n            const dungeonBoss = {\r\n                \"D010\" : \"B901\",\r\n                \"D011\" : \"BB011\",\r\n                \"D012\" : \"BB012\",\r\n                \"D013\" : \"BB013\",\r\n                \"D014\" : \"BB014\",\r\n                \"D015\" : \"BB015\",\r\n                \"D016\" : \"BB016\",\r\n                \"D017\" : \"BB017\",\r\n                \"D018\" : \"BB018\",\r\n                \"D019\" : \"BB019\",\r\n            }\r\n            loadGame[\"rs\"].push(materialSave);\r\n            loadGame[\"d\"].bossesBeat.forEach(bossID => {\r\n                loadGame[\"mh\"].kills.push({id:dungeonBoss[bossID],amt:1});\r\n            });\r\n        };\r\n        loadGame[\"tm\"].buildings = [\r\n        {\r\n            \"id\" : \"TB001\",\r\n            \"status\" : loadGame[\"tm\"].SynthStatus,\r\n        },\r\n        {\r\n            \"id\" : \"TB002\",\r\n            \"status\" : loadGame[\"tm\"].bankStatus,\r\n        },\r\n        {\r\n            \"id\" : \"TB003\",\r\n            \"status\" : loadGame[\"tm\"].fuseStatus,\r\n        },\r\n        {\r\n            \"id\" : \"TB004\",\r\n            \"status\" : loadGame[\"tm\"].smithStatus,\r\n        },\r\n        {\r\n            \"id\" : \"TB005\",\r\n            \"status\" : loadGame[\"tm\"].fortuneStatus,\r\n        },\r\n        {\r\n            \"id\" : \"TB006\",\r\n            \"status\" : loadGame[\"tm\"].tinkerStatus,\r\n        },\r\n        {\r\n            \"id\" : \"TB007\",\r\n            \"status\" : BuildingState.hidden,\r\n        }];\r\n    }\r\n    if (loadGame.v === \"03210\") {\r\n        loadGame.v = \"03211\";\r\n        loadGame[\"mh\"].lvl = 1;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41071\")) loadGame[\"mh\"].lvl = 2;\r\n        if (loadGame[\"al\"].purchased.includes(\"AL41072\")) loadGame[\"mh\"].lvl = 3;\r\n    }\r\n    if (loadGame.v === \"03211\") {\r\n        loadGame.v = \"03212\";\r\n        loadGame[\"d\"].bossesBeat = [...new Set(loadGame[\"d\"].bossesBeat)];\r\n    }\r\n    if (loadGame.v === \"03212\") {\r\n        loadGame.v = \"0334\";\r\n        loadGame[\"h\"].forEach(hero => {\r\n            if (hero.slot7 !== null) hero.slot7.sharp = 0;\r\n        });\r\n        loadGame[\"i\"].forEach(container => {\r\n            if (container === null) return;\r\n            const item = recipeList.idToItem(container.id);\r\n            if (item.type === \"Trinkets\") container.sharp = 0;\r\n        });\r\n        loadGame[\"bb\"].slots.forEach(container => {\r\n            const item = recipeList.idToItem(container.id);\r\n            if (item.type === \"Trinkets\") container.sharp = 0;\r\n        });\r\n    }\r\n    return loadGame;\r\n}\r\n\r\n\r\n\r\n//UI Stuff\r\n$(document).on('click', '#deleteSaveButton', (e) => {\r\n    e.preventDefault();\r\n    ClearSave();\r\n});\r\n\r\n$(document).on('click', '#declineSaveButton', (e) => {\r\n    e.preventDefault();\r\n    setDialogClose();\r\n});\r\n\r\n$(document).on('click', '#exportSave', () => {\r\n    ExportSave();\r\n});\r\n\r\n$(document).on('click', '#importSaveButton', (e) => {\r\n    e.preventDefault();\r\n    ImportSaveButton();\r\n});\r\n\r\n$(document).on('click', '#exportSaveCopy', (e) => {\r\n    e.preventDefault();\r\n    var $temp = $(\"<input>\");\r\n    $(\"body\").append($temp);\r\n    $temp.val($(\"#exportSaveText\").val()).select();\r\n    document.execCommand(\"copy\");\r\n    $temp.remove();\r\n    $(\"#exportStatus\").html('Copied to Clipboard.');\r\n    setTimeout(() => {$(\"#exportStatus\").empty()}, 3500);\r\n})\r\n\r\n$(document).on('click', '#exportSaveLocal', (e) => {\r\n    e.preventDefault();\r\n    downloadSave();\r\n});\r\n\r\nfunction downloadSave() {\r\n    const saveFile = createSaveExport();\r\n    const b = new Blob([saveFile],{type:\"text/plain;charset=utf-8\"});\r\n    saveAs(b, \"ForgeAndFortuneSave.txt\");\r\n}\r\n\r\n//used for diagnostics\r\nfunction unPackSave(file) {\r\n    const unpako = atob(file);\r\n    const saveFile = JSON.parse(JSON.parse(pako.ungzip(unpako,{ to: 'string' })));\r\n    return saveFile;\r\n}"],"file":"saveLoad.js"}