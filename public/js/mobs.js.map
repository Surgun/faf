{"version":3,"sources":["../../src/js/mobs.js"],"names":["MobManager","monsterDB","idCount","addMob","mob","push","idToMob","id","find","generateDungeonMob","mobID","atk","hp","disableEventLayers","mobTemplate","m","Mob","getUniqueID","generateDungeonFloor","dungeon","floorNum","bossMultiplier","mobs","mobIDs","mob1","mob2","mob3","mob4","pow","powGain","Math","miscLoadedValues","hpGain","forEach","MonsterHall","findMonster","MobTemplate","props","Object","assign","image","head","skill1","skill2","skill3","skill4","SkillManager","idToSkill","icon","floor","powMod","hpmax","hpMod","uniqueid","playbook","PlaybookManager","generatePlayBookFromSkills","passive","passiveSkill","save","buffs","buff","createSave","state","undefined","newBuff","BuffManager","generateSaveBuff","power","loadSave","adjustState","Combatant","$","html"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nconst MobManager = {\r\n    monsterDB : [],\r\n    idCount : 0,\r\n    addMob(mob) {\r\n        this.monsterDB.push(mob);\r\n    },\r\n    idToMob(id) {\r\n        return this.monsterDB.find(mob => mob.id === id);\r\n    },\r\n    generateDungeonMob(mobID, atk, hp) {\r\n        disableEventLayers();\r\n        const mobTemplate = this.monsterDB.find(m=>m.id === mobID);\r\n        const mob = new Mob(mobTemplate, atk, hp);\r\n        return mob;\r\n    },\r\n    getUniqueID() {\r\n        this.idCount += 1;\r\n        return this.idCount;\r\n    },\r\n    generateDungeonFloor(dungeon,floorNum,bossMultiplier) {\r\n        const mobs = [];\r\n        const mobIDs = [dungeon.mob1,dungeon.mob2,dungeon.mob3,dungeon.mob4];\r\n        const atk = (dungeon.pow + floorNum * dungeon.powGain) * Math.pow(miscLoadedValues.bossMultiplier,bossMultiplier);\r\n        const hp = (dungeon.hp + floorNum * dungeon.hpGain) * Math.pow(miscLoadedValues.bossMultiplier,bossMultiplier);\r\n        mobIDs.forEach(mobID => {\r\n            mobs.push(this.generateDungeonMob(mobID,atk,hp));\r\n            MonsterHall.findMonster(mob);\r\n        });\r\n        return mobs;\r\n    },\r\n}\r\n\r\nclass MobTemplate {\r\n    constructor (props) {\r\n        Object.assign(this, props);\r\n        this.image = '<img src=\"/assets/images/enemies/' + this.id + '.gif\">';\r\n        this.head = '<img src=\"/assets/images/enemies/heads/' + this.id + '.png\">';\r\n    }\r\n    getSkillIDs() {\r\n        return [this.skill1,this.skill2,this.skill3,this.skill4];\r\n    }\r\n    getSkillIcons() {\r\n        return [SkillManager.idToSkill(this.skill1).icon,SkillManager.idToSkill(this.skill2).icon,SkillManager.idToSkill(this.skill3).icon,SkillManager.idToSkill(this.skill4).icon];\r\n    }\r\n}\r\n\r\nclass Mob extends Combatant {\r\n    constructor (mobTemplate, atk, hp) {\r\n        super(mobTemplate);\r\n        this.pow = Math.floor(atk*this.powMod);\r\n        this.hpmax = Math.floor(hp*this.hpMod);\r\n        this.hp = this.hpmax;\r\n        this.uniqueid = MobManager.getUniqueID();\r\n        this.playbook = PlaybookManager.generatePlayBookFromSkills(this.skill1,this.skill2,this.skill3,this.skill4);\r\n        this.passive = SkillManager.idToSkill(this.passiveSkill);\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.id = this.id;\r\n        save.uniqueid = this.uniqueid;\r\n        save.hp = this.hp;\r\n        save.buffs = [];\r\n        this.buffs.forEach(buff => {\r\n            save.buffs.push(buff.createSave());\r\n        });\r\n        save.state = this.state; \r\n        return save;\r\n    }\r\n    loadSave(save) {\r\n        this.hp = save.hp;\r\n        this.uniqueid = save.uniqueid;\r\n        if (save.buffs !== undefined) {\r\n            save.buffs.forEach(buff => {\r\n                const newBuff = BuffManager.generateSaveBuff(buff.id,this,buff.power);\r\n                newBuff.loadSave(buff);\r\n                this.buffs.push(newBuff);\r\n            });\r\n        }\r\n        this.state = save.state;\r\n        adjustState(this);\r\n    }\r\n}\r\n\r\nfunction adjustState(mob) {\r\n    if (mob.state === \"egg\") {\r\n        mob.image = '<img src=\"/assets/images/enemies/B902A.gif\">';\r\n        $(\"#mobImage\"+mob.uniqueid).html(mob.image);\r\n        mob.playbook = PlaybookManager.generatePlayBookFromSkills(\"SM902A\",\"SM902A\",\"SM902A\",\"SM902B\");\r\n    }\r\n}"],"file":"mobs.js"}