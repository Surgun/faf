{"version":3,"sources":["../../src/js/FileSaver.js"],"names":["_global","window","self","global","bom","blob","opts","autoBom","console","warn","test","type","Blob","String","fromCharCode","download","url","name","xhr","XMLHttpRequest","open","responseType","onload","saveAs","response","onerror","error","send","corsEnabled","e","status","click","node","dispatchEvent","MouseEvent","evt","document","createEvent","initMouseEvent","HTMLAnchorElement","prototype","URL","webkitURL","a","createElement","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","navigator","msSaveOrOpenBlob","popup","title","body","innerText","force","isSafari","HTMLElement","safari","isChromeIOS","userAgent","FileReader","reader","onloadend","result","replace","readAsDataURL","module","exports"],"mappings":"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","sourcesContent":["/*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n*\r\n* By Eli Grey, http://eligrey.com\r\n*\r\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\r\n* source  : http://purl.eligrey.com/github/FileSaver.js\r\n*/\r\n\r\n// The one and only way of getting global scope in all environments\r\n// https://stackoverflow.com/q/3277182/1008999\r\nvar _global = typeof window === 'object' && window.window === window\r\n  ? window : typeof self === 'object' && self.self === self\r\n  ? self : typeof global === 'object' && global.global === global\r\n  ? global\r\n  : this\r\n\r\nfunction bom (blob, opts) {\r\n  if (typeof opts === 'undefined') opts = { autoBom: false }\r\n  else if (typeof opts !== 'object') {\r\n    console.warn('Deprecated: Expected third argument to be a object')\r\n    opts = { autoBom: !opts }\r\n  }\r\n\r\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\r\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\r\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\r\n  }\r\n  return blob\r\n}\r\n\r\nfunction download (url, name, opts) {\r\n  var xhr = new XMLHttpRequest()\r\n  xhr.open('GET', url)\r\n  xhr.responseType = 'blob'\r\n  xhr.onload = function () {\r\n    saveAs(xhr.response, name, opts)\r\n  }\r\n  xhr.onerror = function () {\r\n    console.error('could not download file')\r\n  }\r\n  xhr.send()\r\n}\r\n\r\nfunction corsEnabled (url) {\r\n  var xhr = new XMLHttpRequest()\r\n  // use sync to avoid popup blocker\r\n  xhr.open('HEAD', url, false)\r\n  try {\r\n    xhr.send()\r\n  } catch (e) {}\r\n  return xhr.status >= 200 && xhr.status <= 299\r\n}\r\n\r\n// `a.click()` doesn't work for all browsers (#465)\r\nfunction click (node) {\r\n  try {\r\n    node.dispatchEvent(new MouseEvent('click'))\r\n  } catch (e) {\r\n    var evt = document.createEvent('MouseEvents')\r\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\r\n                          20, false, false, false, false, 0, null)\r\n    node.dispatchEvent(evt)\r\n  }\r\n}\r\n\r\nvar saveAs = _global.saveAs || (\r\n  // probably in some web worker\r\n  (typeof window !== 'object' || window !== _global)\r\n    ? function saveAs () { /* noop */ }\r\n\r\n  // Use download attribute first if possible (#193 Lumia mobile)\r\n  : 'download' in HTMLAnchorElement.prototype\r\n  ? function saveAs (blob, name, opts) {\r\n    var URL = _global.URL || _global.webkitURL\r\n    var a = document.createElement('a')\r\n    name = name || blob.name || 'download'\r\n\r\n    a.download = name\r\n    a.rel = 'noopener' // tabnabbing\r\n\r\n    // TODO: detect chrome extensions & packaged apps\r\n    // a.target = '_blank'\r\n\r\n    if (typeof blob === 'string') {\r\n      // Support regular links\r\n      a.href = blob\r\n      if (a.origin !== location.origin) {\r\n        corsEnabled(a.href)\r\n          ? download(blob, name, opts)\r\n          : click(a, a.target = '_blank')\r\n      } else {\r\n        click(a)\r\n      }\r\n    } else {\r\n      // Support blobs\r\n      a.href = URL.createObjectURL(blob)\r\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\r\n      setTimeout(function () { click(a) }, 0)\r\n    }\r\n  }\r\n\r\n  // Use msSaveOrOpenBlob as a second approach\r\n  : 'msSaveOrOpenBlob' in navigator\r\n  ? function saveAs (blob, name, opts) {\r\n    name = name || blob.name || 'download'\r\n\r\n    if (typeof blob === 'string') {\r\n      if (corsEnabled(blob)) {\r\n        download(blob, name, opts)\r\n      } else {\r\n        var a = document.createElement('a')\r\n        a.href = blob\r\n        a.target = '_blank'\r\n        setTimeout(function () { click(a) })\r\n      }\r\n    } else {\r\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\r\n    }\r\n  }\r\n\r\n  // Fallback to using FileReader and a popup\r\n  : function saveAs (blob, name, opts, popup) {\r\n    // Open a popup immediately do go around popup blocker\r\n    // Mostly only available on user interaction and the fileReader is async so...\r\n    popup = popup || open('', '_blank')\r\n    if (popup) {\r\n      popup.document.title =\r\n      popup.document.body.innerText = 'downloading...'\r\n    }\r\n\r\n    if (typeof blob === 'string') return download(blob, name, opts)\r\n\r\n    var force = blob.type === 'application/octet-stream'\r\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\r\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\r\n\r\n    if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\r\n      // Safari doesn't allow downloading of blob URLs\r\n      var reader = new FileReader()\r\n      reader.onloadend = function () {\r\n        var url = reader.result\r\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\r\n        if (popup) popup.location.href = url\r\n        else location = url\r\n        popup = null // reverse-tabnabbing #460\r\n      }\r\n      reader.readAsDataURL(blob)\r\n    } else {\r\n      var URL = _global.URL || _global.webkitURL\r\n      var url = URL.createObjectURL(blob)\r\n      if (popup) popup.location = url\r\n      else location.href = url\r\n      popup = null // reverse-tabnabbing #460\r\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\r\n    }\r\n  }\r\n)\r\n\r\n_global.saveAs = saveAs.saveAs = saveAs\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = saveAs;\r\n}\r\n"],"file":"FileSaver.js"}