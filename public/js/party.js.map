{"version":3,"sources":["../../src/js/party.js"],"names":["$dtsBanner","$","$dtsDungeons","$dungeonTeamCollection","$dtsBottom","Party","heroID","heroes","map","h","HeroManager","idToHero","save","member","includes","length","some","hero","dead","every","t","forEach","addTime","dungeonID","hp","maxHP","resetPlaybookPosition","removeBuffs","PartyCreator","dungeonSelect","removeMember","slotNum","splice","addMember","emptyPartySlots","push","clearMembers","validTeam","heroesReal","hid","alive","lockParty","inDungeon","party","startingTeam","team","statuses","getStartFloor","p","Math","min","getMax","DungeonManager","dungeonCreatingID","refreshHeroSelect","area","empty","addClass","id","appendTo","html","name","dungeons","dungeon","d","data","dungon","mat","attr","i","characterCard","prependTo","emptySlots","dungeonByID","partySize","d1a","prepend","$dtsTop","append","buttons","dbutton1","or","dbutton2","hide","d1bot","d2","ownedHeroes","bannedHero","uniqueid","document","on","e","preventDefault","tabClick","currentTarget","ID","createDungeon","initializeSideBarDungeon","$dungeonTeamSelect","$dungeonRun","show","Notifications","noPartySelected","prefix","dv","status","dclick","image","d3","miscIcons","pow","getPow","d5"],"mappings":"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","sourcesContent":["\"use strict\";\r\n//creates a party as outlined in DungeonManager. Initated with CreateParty();\r\n\r\nconst $dtsBanner = $(\"#dtsBanner\");\r\nconst $dtsDungeons = $(\"#dtsDungeons\");\r\nconst $dungeonTeamCollection = $(\"#dungeonTeamCollection\");\r\nconst $dtsBottom = $(\"#dtsBottom\");\r\n\r\nclass Party {\r\n    constructor (heroID) {\r\n        this.heroID = heroID;\r\n        this.heroes = heroID.map(h => HeroManager.idToHero(h));\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.heroID = this.heroID;\r\n        return save;\r\n    }\r\n    hasMember(member) {\r\n        return this.heroes.includes(member);\r\n    }\r\n    size() {\r\n        return this.heroes.length;\r\n    }\r\n    alive() {\r\n        return this.heroes.some(hero => !hero.dead());\r\n    }\r\n    isDead() {\r\n        return this.heroes.every(hero => hero.dead());\r\n    }\r\n    addTime(t) {\r\n        this.heroes.forEach(h=> {\r\n            h.addTime(t, dungeonID);\r\n        })\r\n    }\r\n    reset() {\r\n        this.heroes.forEach(hero => {\r\n            hero.hp = hero.maxHP();\r\n            hero.resetPlaybookPosition();\r\n            hero.removeBuffs();\r\n        });\r\n    }\r\n}\r\n\r\nconst PartyCreator = {\r\n    heroes : [],\r\n    dungeonSelect : null,\r\n    removeMember(slotNum) {\r\n        this.heroes.splice(slotNum,1);\r\n    },\r\n    addMember(heroID) {\r\n        if (this.emptyPartySlots() === 0) return false;\r\n        this.heroes.push(heroID);\r\n    },\r\n    clearMembers() {\r\n        this.heroes = [];\r\n    },\r\n    validTeam() {\r\n        if (this.heroes.length === 0) return false;\r\n        const heroesReal = this.heroes.map(hid => HeroManager.idToHero(hid));\r\n        return heroesReal.every(h => h.alive());\r\n    },\r\n    lockParty() {\r\n        this.heroes.map(hid => HeroManager.idToHero(hid)).forEach(h=>{\r\n            h.inDungeon = true;\r\n            h.hp = h.maxHP();\r\n        });\r\n        const party = new Party(this.heroes);\r\n        this.heroes = [];\r\n        return party;\r\n    },\r\n    startingTeam(team) {\r\n        if (team === null) return;\r\n        const statuses = team.map(h=>HeroManager.idToHero(h).inDungeon)\r\n        if (statuses.some(h=>h)) return;\r\n        team.forEach(h => this.addMember(h));\r\n    },\r\n    getStartFloor() {\r\n        if (this.heroes.length === 0) return 0;\r\n        const heroes = this.heroes.map(p=>HeroManager.idToHero(p));\r\n        return Math.min(...heroes.map(p => p.getMax(DungeonManager.dungeonCreatingID)));\r\n    }\r\n}\r\n\r\nfunction refreshHeroSelect(area) {\r\n    //Team Banner\r\n    $dtsBanner.empty();\r\n    $(\"<div/>\").addClass(`dts${area.id} dtsBackground`).appendTo($dtsBanner);\r\n    $(\"<div/>\").addClass(`dts${area.id} dtsHeader`).html(area.name).appendTo($dtsBanner);\r\n    $(\"<div/>\").addClass(`dts${area.id} dtsBackButton`).html(`<i class=\"fas fa-arrow-left\"></i>`).appendTo($dtsBanner);\r\n    //Possible Dungeons\r\n    $dtsDungeons.empty();\r\n    area.dungeons.forEach(dungeon => {\r\n        const d = $(\"<div/>\").addClass(\"dtsDungeon\").data(\"dungeonID\",dungeon.id);\r\n        $(\"<div/>\").addClass(\"dtsDungeonName\").html(dungon.name).appendTo(d);\r\n        if (dungeon.mat !== null) $(\"<div/>\").addClass(\"dtsMaterial tooltip\").attr({\"data-tooltip\":\"material_desc\",\"data-tooltip-value\":dungeon.mat}).appendTo(d);\r\n    });\r\n    $dungeonTeamCollection.empty();\r\n    //actual members\r\n    PartyCreator.heroes.forEach((hero,i) => {\r\n        characterCard(\"dungeonTeam\",i,hero).prependTo($dungeonTeamCollection);\r\n    });\r\n    const emptySlots = DungeonManager.dungeonByID(PartyCreator.dungeonSelect).partySize - PartyCreator.heroes.length;\r\n    for (let i=0;i<emptySlots;i++) {\r\n        const d1a = characterCard(\"dungeonTeam\",i).addClass(\"noHeroDungeonSelect\");\r\n        $dungeonTeamCollection.prepend(d1a);\r\n    }\r\n    $dtsTop.append(d);\r\n    const buttons = $(\"<div/>\").addClass(\"partyLaunchButton\").appendTo($dtsTop);\r\n    const dbutton1 = $(\"<div/>\").addClass(\"dungeonTeamButton\").attr(\"id\",\"dungeonTeamButtonSkip\").html(`Start at Floor ${PartyCreator.getStartFloor()}`).appendTo(buttons);\r\n    const or = $(\"<span/>\").html(\" or \").appendTo(buttons);\r\n    const dbutton2 = $(\"<div/>\").addClass(\"dungeonTeamButton\").attr(\"id\",\"dungeonTeamButton\").html(\"Start at Floor 1\").appendTo(buttons);\r\n    if (PartyCreator.getStartFloor() <= 1) {\r\n        or.hide();\r\n        dbutton2.hide();\r\n    }\r\n    if (PartyCreator.heroes.length === 0) {\r\n        dbutton1.addClass('dungeonStartNotAvailable');\r\n        dbutton2.addClass('dungeonStartNotAvailable');\r\n    }\r\n    $dtsBottom.empty();\r\n    //available heroes\r\n    const d1bot = $(\"<div/>\").addClass(\"dtsBotTitle\").html(\"<h3>Your Available Heroes</h3>\");\r\n    $dtsBottom.append(d1bot);\r\n    const d2 = $(\"<div/>\").addClass(\"dungeonAvailableCollection\");\r\n    HeroManager.ownedHeroes().forEach(hero => {\r\n        if (dungeon.bannedHero.includes(hero.id)) characterCard(\"heroBanned dungeonNotAvailable\",hero.uniqueid,hero.id, \"Banned from Here\").appendTo(d2);\r\n        else if (hero.inDungeon) characterCard(\"dungeonNotAvailable\",hero.uniqueid,hero.id,\"In Dungeon\").appendTo(d2);\r\n        else if (PartyCreator.heroes.includes(hero.id)) characterCard(\"partyHero dungeonNotAvailable\",hero.uniqueid,hero.id, \"Already in Party\").appendTo(d2);\r\n        else characterCard(\"dungeonAvailable\",hero.uniqueid,hero.id,null).appendTo(d2);\r\n    });\r\n    $dtsBottom.append(d2);\r\n}\r\n\r\n//Go back to dungeon select screen\r\n$(document).on('click', \".dtsBackButton\", (e) => {\r\n    e.preventDefault();\r\n    tabClick(e, \"dungeonsTab\");\r\n});\r\n\r\n//clicking a hero to remove them from your party\r\n$(document).on('click', \"div.dungeonTeamCardClick\", (e) => {\r\n    e.preventDefault();\r\n    const heroID = $(e.currentTarget).attr(\"heroID\");\r\n    PartyCreator.removeMember(heroID);\r\n    refreshHeroSelect(DungeonManager.dungeonCreatingID);\r\n});\r\n\r\n//clicking a hero to add them to your party\r\n$(document).on('click', \"div.dungeonAvailableCardClick\", (e) => {\r\n    e.preventDefault();\r\n    const ID = $(e.currentTarget).attr(\"heroid\");\r\n    PartyCreator.addMember(ID);\r\n    refreshHeroSelect(DungeonManager.dungeonCreatingID);\r\n});\r\n\r\n//locking in a team to start a dungeon\r\n$(document).on('click', \"#dungeonTeamButton\", (e) => {\r\n    e.preventDefault();\r\n    if (PartyCreator.validTeam()) {\r\n        DungeonManager.createDungeon(1);\r\n        initializeSideBarDungeon();\r\n        $dungeonTeamSelect.hide();\r\n        $dungeonRun.show();\r\n    }\r\n    else {\r\n        Notifications.noPartySelected();\r\n    }\r\n});\r\n\r\n$(document).on('click', \"#dungeonTeamButtonSkip\", (e) => {\r\n    e.preventDefault();\r\n    if (PartyCreator.validTeam()) {\r\n        DungeonManager.createDungeon(PartyCreator.getStartFloor());\r\n        initializeSideBarDungeon();\r\n        $dungeonTeamSelect.hide();\r\n        $dungeonRun.show();\r\n    }\r\n    else {\r\n        Notifications.noPartySelected();\r\n    }\r\n});\r\n\r\nfunction characterCard(prefix,dv,ID,status) {\r\n    const d = $(\"<div/>\").addClass(prefix+\"Card\").attr(\"data-value\",dv);\r\n    if (!ID) {\r\n        $(\"<div/>\").addClass(prefix+\"Image\").html('<img src=\"/assets/images/heroes/blank.png\">').appendTo(d);\r\n        $(\"<div/>\").addClass(prefix+\"Name\").html(\"Empty\").appendTo(d);\r\n        return d;\r\n    }\r\n    const dclick = $(\"<div/>\").addClass(prefix+\"CardClick\").attr(\"heroID\",dv).appendTo(d);\r\n    const hero = HeroManager.idToHero(ID);\r\n    $(\"<div/>\").addClass(prefix+\"Image\").html(hero.image).appendTo(dclick);\r\n    $(\"<div/>\").addClass(prefix+\"Name\").html(hero.name).appendTo(dclick);\r\n    const d3 = $(\"<div/>\").addClass(prefix+\"Stats\").appendTo(dclick);\r\n        $(\"<div/>\").addClass(prefix+\"HP\"+\" heroStat\"+\" tooltip\").attr(\"data-tooltip\",\"hp\").html(`${miscIcons.hp} ${hero.maxHP()}`).appendTo(d3);\r\n        $(\"<div/>\").addClass(prefix+\"Pow\"+\" heroPowStat\"+\" tooltip\").attr(\"data-tooltip\",\"pow\").html(`${miscIcons.pow} ${hero.getPow()}`).appendTo(d3);\r\n    const d5 = $(\"<div/>\").addClass(\"heroStatus\").html(status).appendTo(dclick);\r\n    if (status === null) d5.hide();\r\n    else d.addClass(\"heroUnavailable\");\r\n    $(\"<div/>\").addClass(\"partyMaxFloor\").html(`Floor ${hero.getMax(DungeonManager.dungeonCreatingID)}`).appendTo(dclick);\r\n    return d;\r\n}"],"file":"party.js"}
