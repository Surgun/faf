{"version":3,"sources":["../../src/js/party.js"],"names":["$dungeonTeamSelect","$","$dtsBanner","$dtsMaterials","$dtsTop","$dtsBottom","Party","heroID","heroes","map","h","HeroManager","idToHero","save","member","includes","length","some","hero","dead","every","t","forEach","addTime","dungeonID","hp","maxHP","resetPlaybookPosition","removeBuffs","id","floor","setMax","PartyCreator","emptyPartySlots","DungeonManager","dungeonSlotCount","removeMember","slotNum","splice","addMember","push","clearMembers","validTeam","heroesReal","hid","alive","lockParty","inDungeon","party","healCost","reduce","total","noheal","payHealPart","amt","ResourceManager","materialAvailable","Notifications","cantAffordHealParty","deductMoney","healPercent","startingTeam","team","statuses","getStartFloor","p","Math","min","getMax","dungeonCreatingID","refreshHeroSelect","dungeon","dungeonByID","empty","b1","addClass","appendTo","b2","html","name","type","bossDifficulty","miscIcons","skull","dmTitle","attr","dm","settings","expandedMaterials","materialSeenDungeon","dm1","append","m","img","formatToUnits","d1top","d","i","d1","characterCard","prepend","d1a","buttons","dbutton1","or","dbutton2","hide","d1bot","d2","ownedHeroes","bannedHero","uniqueid","document","on","e","preventDefault","toggleActive","currentTarget","hasClass","title","removeClass","saveSettings","tabClick","ID","createDungeon","initializeSideBarDungeon","$dungeonRun","show","noPartySelected","prefix","dv","status","dclick","image","d3","pow","getPow","d5"],"mappings":"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","sourcesContent":["\"use strict\";\r\n//creates a party as outlined in DungeonManager. Initated with CreateParty();\r\n\r\nconst $dungeonTeamSelect = $(\"#dungeonTeamSelect\");\r\nconst $dtsBanner = $(\"#dtsBanner\");\r\nconst $dtsMaterials = $(\"#dtsMaterials\");\r\nconst $dtsTop = $(\"#dtsTop\");\r\nconst $dtsBottom = $(\"#dtsBottom\");\r\n\r\nclass Party {\r\n    constructor (heroID) {\r\n        this.heroID = heroID;\r\n        this.heroes = heroID.map(h => HeroManager.idToHero(h));\r\n    }\r\n    createSave() {\r\n        const save = {};\r\n        save.heroID = this.heroID;\r\n        return save;\r\n    }\r\n    hasMember(member) {\r\n        return this.heroes.includes(member);\r\n    }\r\n    size() {\r\n        return this.heroes.length;\r\n    }\r\n    alive() {\r\n        return this.heroes.some(hero => !hero.dead());\r\n    }\r\n    isDead() {\r\n        return this.heroes.every(hero => hero.dead());\r\n    }\r\n    addTime(t) {\r\n        this.heroes.forEach(h=> {\r\n            h.addTime(t, dungeonID);\r\n        })\r\n    }\r\n    resetForFloor() {\r\n        this.heroes.forEach(hero => {\r\n            hero.hp = hero.maxHP();\r\n            hero.resetPlaybookPosition();\r\n            hero.removeBuffs();\r\n        });\r\n    }\r\n    setMaxFloor(id,floor) {\r\n        this.heroes.forEach(h => h.setMax(id,floor));\r\n    }\r\n}\r\n\r\nconst PartyCreator = {\r\n    heroes : [],\r\n    emptyPartySlots() {\r\n        return DungeonManager.dungeonSlotCount() - this.heroes.length;\r\n    },\r\n    removeMember(slotNum) {\r\n        this.heroes.splice(slotNum,1);\r\n    },\r\n    addMember(heroID) {\r\n        if (this.emptyPartySlots() === 0) return false;\r\n        this.heroes.push(heroID);\r\n    },\r\n    clearMembers() {\r\n        this.heroes = [];\r\n    },\r\n    validTeam() {\r\n        if (this.heroes.length === 0) return false;\r\n        const heroesReal = this.heroes.map(hid => HeroManager.idToHero(hid));\r\n        return heroesReal.some(h => h.alive());\r\n    },\r\n    lockParty() {\r\n        this.heroes.map(hid => HeroManager.idToHero(hid)).forEach(h=>{\r\n            h.inDungeon = true;\r\n            h.hp = h.maxHP();\r\n        });\r\n        const party = new Party(this.heroes);\r\n        this.heroes = [];\r\n        return party;\r\n    },\r\n    healCost() {\r\n        if (this.heroes.length === 0) return 0;\r\n        return this.heroes.map(h=>HeroManager.idToHero(h).healCost()).reduce((total,h) => total + h);\r\n    },\r\n    noheal() {\r\n        if (this.heroes.length === 0) return true;\r\n        return this.heroes.map(h=>HeroManager.idToHero(h)).every(h=>h.hp === h.maxHP());\r\n    },\r\n    payHealPart() {\r\n        const amt = this.healCost();\r\n        if (ResourceManager.materialAvailable(\"M001\") < amt) {\r\n            Notifications.cantAffordHealParty();\r\n            return;\r\n        }\r\n        ResourceManager.deductMoney(amt);\r\n        this.heroes.map(h=>HeroManager.idToHero(h)).forEach(h=>h.healPercent(100));\r\n    },\r\n    startingTeam(team) {\r\n        if (team === null) return;\r\n        const statuses = team.map(h=>HeroManager.idToHero(h).inDungeon)\r\n        if (statuses.some(h=>h)) return;\r\n        team.forEach(h => this.addMember(h));\r\n    },\r\n    getStartFloor() {\r\n        if (this.heroes.length === 0) return 0;\r\n        const heroes = this.heroes.map(p=>HeroManager.idToHero(p));\r\n        return Math.min(...heroes.map(p => p.getMax(DungeonManager.dungeonCreatingID)));\r\n    }\r\n}\r\n\r\nfunction refreshHeroSelect() {\r\n    const dungeon = DungeonManager.dungeonByID(DungeonManager.dungeonCreatingID);\r\n    //Team Banner\r\n    $dtsBanner.empty();\r\n    const b1 = $(\"<div/>\").addClass(`dts${dungeon.id} dtsBackground`).appendTo($dtsBanner);\r\n    const b2 = $(\"<div/>\").addClass(`dts${dungeon.id} dtsHeader`).html(dungeon.name).appendTo($dtsBanner);\r\n    $(\"<div/>\").addClass(`dtsMaxFloor`).html(\"Max Floor Skip: 100\").appendTo($dtsBanner);\r\n    $(\"<div/>\").addClass(`dts${dungeon.id} dtsBackButton`).html(`<i class=\"fas fa-arrow-left\"></i>`).appendTo($dtsBanner);\r\n    if (dungeon.type === \"boss\") {\r\n        b1.addClass(\"DBoss\");\r\n        b2.addClass(\"DBoss\");\r\n        if (dungeon.bossDifficulty() > 0) $(\"<div/>\").addClass(\"dtsBossDifficulty\").html(`${dungeon.bossDifficulty()} ${miscIcons.skull}`).appendTo($dtsBanner);\r\n    }\r\n    //Materials in Dungeon\r\n    $dtsMaterials.empty();\r\n    if (dungeon.type !== \"boss\") {\r\n        const dmTitle = $(\"<div/>\").addClass(\"dtsMaterialTitle\").attr(\"data-value\",dungeon.id).html(`Materials Found In This Dungeon <i class=\"fas fa-chevron-down\"></i>`).appendTo($dtsMaterials);\r\n        const dm = $(\"<div/>\").addClass(\"dtsMaterialContainer\");\r\n        if (settings.expandedMaterials[dungeon.id] === 1) {\r\n            dmTitle.addClass(\"toggleActive\");\r\n            dm.addClass(\"expanded\");\r\n        }\r\n        if (ResourceManager.materialSeenDungeon(dungeon.id).length === 0) {\r\n            const dm1 = $(\"<div/>\").addClass(\"dtsMaterialNone\").html(\"You have not discovered any materials.\");\r\n            dm.append(dm1);\r\n        }\r\n        ResourceManager.materialSeenDungeon(dungeon.id).forEach(m => {\r\n            const dm1 = $(\"<div/>\").addClass(\"dtsMaterial\").appendTo(dm);\r\n                $(\"<div/>\").addClass(\"dtsMaterialIcon\").html(m.img).appendTo(dm1);\r\n                $(\"<div/>\").addClass(\"dtsMaterialName\").html(m.name).appendTo(dm1);\r\n                $(\"<div/>\").addClass(\"dtsMaterialAmt tooltip\").attr(\"data-tooltip\",\"in_inventory\").html(formatToUnits(m.amt,2)).appendTo(dm1);\r\n        });\r\n        $dtsMaterials.append(dm);\r\n    }\r\n    $dtsTop.empty();\r\n    const d1top = $(\"<div/>\").addClass(\"dtsTopTitle\").html(\"<h3>Assemble your Team!</h3>\");\r\n    $dtsTop.append(d1top);\r\n    const d = $(\"<div/>\").addClass(\"dungeonTeamCollection\");\r\n    //actual members\r\n    PartyCreator.heroes.forEach((hero,i) => {\r\n        const d1 = characterCard(\"dungeonTeam\",i,hero);\r\n        d.prepend(d1);\r\n    });\r\n    //empty slots\r\n    for (let i=0;i<PartyCreator.emptyPartySlots();i++) {\r\n        const d1a = characterCard(\"dungeonTeam\",i).addClass(\"noHeroDungeonSelect\");\r\n        d.prepend(d1a);\r\n    }\r\n    $dtsTop.append(d);\r\n    const buttons = $(\"<div/>\").addClass(\"partyLaunchButton\").appendTo($dtsTop);\r\n    const dbutton1 = $(\"<div/>\").addClass(\"dungeonTeamButton\").attr(\"id\",\"dungeonTeamButtonSkip\").html(`Start at Floor ${PartyCreator.getStartFloor()}`).appendTo(buttons);\r\n    const or = $(\"<span/>\").html(\" or \").appendTo(buttons);\r\n    const dbutton2 = $(\"<div/>\").addClass(\"dungeonTeamButton\").attr(\"id\",\"dungeonTeamButton\").html(\"Start at Floor 1\").appendTo(buttons);\r\n    if (PartyCreator.getStartFloor() <= 1) {\r\n        or.hide();\r\n        dbutton2.hide();\r\n    }\r\n    if (PartyCreator.heroes.length === 0) {\r\n        dbutton1.addClass('dungeonStartNotAvailable');\r\n        dbutton2.addClass('dungeonStartNotAvailable');\r\n    }\r\n    $dtsBottom.empty();\r\n    //available heroes\r\n    const d1bot = $(\"<div/>\").addClass(\"dtsBotTitle\").html(\"<h3>Your Available Heroes</h3>\");\r\n    $dtsBottom.append(d1bot);\r\n    const d2 = $(\"<div/>\").addClass(\"dungeonAvailableCollection\");\r\n    HeroManager.ownedHeroes().forEach(hero => {\r\n        if (dungeon.bannedHero.includes(hero.id)) characterCard(\"heroBanned dungeonNotAvailable\",hero.uniqueid,hero.id, \"Banned from Here\").appendTo(d2);\r\n        else if (hero.inDungeon) characterCard(\"dungeonNotAvailable\",hero.uniqueid,hero.id,\"In Dungeon\").appendTo(d2);\r\n        else if (PartyCreator.heroes.includes(hero.id)) characterCard(\"partyHero dungeonNotAvailable\",hero.uniqueid,hero.id, \"Already in Party\").appendTo(d2);\r\n        else characterCard(\"dungeonAvailable\",hero.uniqueid,hero.id,null).appendTo(d2);\r\n    });\r\n    $dtsBottom.append(d2);\r\n}\r\n\r\n// Toggle displaying dungeon materials on select screen\r\n$(document).on('click','.dtsMaterialTitle', (e) => {\r\n    e.preventDefault();\r\n    const toggleActive = $(e.currentTarget).hasClass(\"toggleActive\");\r\n    const title = $(\".dtsMaterialTitle\");\r\n    const dungeonID = title.attr(\"data-value\");\r\n    $(\".dtsMaterialContainer\").addClass(\"expanded\");\r\n    title.addClass(\"toggleActive\");\r\n    settings.expandedMaterials[dungeonID] = 1;\r\n    if (toggleActive) {\r\n        $(e.currentTarget).removeClass(\"toggleActive\");\r\n        $(\".dtsMaterialContainer\").removeClass(\"expanded\");\r\n        settings.expandedMaterials[dungeonID] = 0;\r\n    }\r\n    saveSettings();\r\n});\r\n\r\n//Go back to dungeon select screen\r\n$(document).on('click', \".dtsBackButton\", (e) => {\r\n    e.preventDefault();\r\n    tabClick(e, \"dungeonsTab\");\r\n});\r\n\r\n//clicking a hero to remove them from your party\r\n$(document).on('click', \"div.dungeonTeamCardClick\", (e) => {\r\n    e.preventDefault();\r\n    const heroID = $(e.currentTarget).attr(\"heroID\");\r\n    PartyCreator.removeMember(heroID);\r\n    refreshHeroSelect(DungeonManager.dungeonCreatingID);\r\n});\r\n\r\n//clicking a hero to add them to your party\r\n$(document).on('click', \"div.dungeonAvailableCardClick\", (e) => {\r\n    e.preventDefault();\r\n    const ID = $(e.currentTarget).attr(\"heroid\");\r\n    PartyCreator.addMember(ID);\r\n    refreshHeroSelect(DungeonManager.dungeonCreatingID);\r\n});\r\n\r\n//locking in a team to start a dungeon\r\n$(document).on('click', \"#dungeonTeamButton\", (e) => {\r\n    e.preventDefault();\r\n    if (PartyCreator.validTeam()) {\r\n        DungeonManager.createDungeon(1);\r\n        initializeSideBarDungeon();\r\n        $dungeonTeamSelect.hide();\r\n        $dungeonRun.show();\r\n    }\r\n    else {\r\n        Notifications.noPartySelected();\r\n    }\r\n});\r\n\r\n$(document).on('click', \"#dungeonTeamButtonSkip\", (e) => {\r\n    e.preventDefault();\r\n    if (PartyCreator.validTeam()) {\r\n        DungeonManager.createDungeon(PartyCreator.getStartFloor());\r\n        initializeSideBarDungeon();\r\n        $dungeonTeamSelect.hide();\r\n        $dungeonRun.show();\r\n    }\r\n    else {\r\n        Notifications.noPartySelected();\r\n    }\r\n});\r\n\r\nfunction characterCard(prefix,dv,ID,status) {\r\n    const d = $(\"<div/>\").addClass(prefix+\"Card\").attr(\"data-value\",dv);\r\n    if (!ID) {\r\n        $(\"<div/>\").addClass(prefix+\"Image\").html('<img src=\"/assets/images/heroes/blank.png\">').appendTo(d);\r\n        $(\"<div/>\").addClass(prefix+\"Name\").html(\"Empty\").appendTo(d);\r\n        return d;\r\n    }\r\n    const dclick = $(\"<div/>\").addClass(prefix+\"CardClick\").attr(\"heroID\",dv).appendTo(d);\r\n    const hero = HeroManager.idToHero(ID);\r\n    $(\"<div/>\").addClass(prefix+\"Image\").html(hero.image).appendTo(dclick);\r\n    $(\"<div/>\").addClass(prefix+\"Name\").html(hero.name).appendTo(dclick);\r\n    const d3 = $(\"<div/>\").addClass(prefix+\"Stats\").appendTo(dclick);\r\n        $(\"<div/>\").addClass(prefix+\"HP\"+\" heroStat\"+\" tooltip\").attr(\"data-tooltip\",\"hp\").html(`${miscIcons.hp} ${hero.maxHP()}`).appendTo(d3);\r\n        $(\"<div/>\").addClass(prefix+\"Pow\"+\" heroPowStat\"+\" tooltip\").attr(\"data-tooltip\",\"pow\").html(`${miscIcons.pow} ${hero.getPow()}`).appendTo(d3);\r\n    const d5 = $(\"<div/>\").addClass(\"heroStatus\").html(status).appendTo(dclick);\r\n    if (status === null) d5.hide();\r\n    else d.addClass(\"heroUnavailable\");\r\n    $(\"<div/>\").addClass(\"partyMaxFloor\").html(`Floor ${hero.getMax(DungeonManager.dungeonCreatingID)}`).appendTo(dclick);\r\n    return d;\r\n}"],"file":"party.js"}